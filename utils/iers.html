<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>IERS data access (astropy.utils.iers) &mdash; Astropy v1.2.dev15690</title>
    
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.dev15690',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="top" title="Astropy v1.2.dev15690" href="../index.html" />
    <link rel="up" title="Astropy Core Package Utilities (astropy.utils)" href="index.html" />
    <link rel="next" title="make_function_with_signature" href="../api/astropy.utils.codegen.make_function_with_signature.html" />
    <link rel="prev" title="Astropy Core Package Utilities (astropy.utils)" href="index.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>
<script type="text/javascript" src="../_static/copybutton.js"></script>


  </head>
  <body role="document">
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="../api/astropy.utils.codegen.make_function_with_signature.html" title="make_function_with_signature">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="index.html" title="Astropy Core Package Utilities (astropy.utils)">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">Astropy v1.2.dev15690</a>
	 &raquo;
      </li>
      <li><a href="index.html" accesskey="U">Astropy Core Package Utilities (<code class="docutils literal"><span class="pre">astropy.utils</span></code>)</a> &raquo;</li>
      
      <li>IERS data access (<code class="docutils literal"><span class="pre">astropy.utils.iers</span></code>)</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="iers-data-access-astropy-utils-iers">
<span id="utils-iers"></span><h1>IERS data access (<a class="reference internal" href="index.html#module-astropy.utils.iers" title="astropy.utils.iers"><code class="xref py py-obj docutils literal"><span class="pre">astropy.utils.iers</span></code></a>)<a class="headerlink" href="#iers-data-access-astropy-utils-iers" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="index.html#module-astropy.utils.iers" title="astropy.utils.iers"><code class="xref py py-obj docutils literal"><span class="pre">iers</span></code></a> package provides access to the tables provided by
the International Earth Rotation and Reference Systems (IERS) service, in
particular allowing interpolation of published UT1-UTC values for given
times.  These are used in <a class="reference internal" href="../time/index.html#module-astropy.time" title="astropy.time"><code class="xref py py-obj docutils literal"><span class="pre">astropy.time</span></code></a> to provide UT1 values.  The polar
motions are also used for determining Earth orientation for
celestional-to-terrestrial coordinate transformations
(in <a class="reference internal" href="../coordinates/index.html#module-astropy.coordinates" title="astropy.coordinates"><code class="xref py py-obj docutils literal"><span class="pre">astropy.coordinates</span></code></a>).</p>
</div>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Starting with astropy 1.2, the latest IERS values (which include approximately
one year of predictive values) are automatically downloaded from the IERS
service when required.  This happens when a time or coordinate transformation
needs a value which is not already available via the download cache.  In most
cases there is no need for invoking the <a class="reference internal" href="index.html#module-astropy.utils.iers" title="astropy.utils.iers"><code class="xref py py-obj docutils literal"><span class="pre">iers</span></code></a> classes oneself,
but it is useful to understand the situations when a download will occur
and how this can be controlled.</p>
<div class="section" id="basic-usage">
<h3>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h3>
<p>The IERS data are managed via a instances of the
<a class="reference internal" href="../api/astropy.utils.iers.IERS_Auto.html#astropy.utils.iers.IERS_Auto" title="astropy.utils.iers.IERS_Auto"><code class="xref py py-class docutils literal"><span class="pre">IERS_Auto</span></code></a> class.  These instances are created
internally within the relevant time and coordinate objects during
transformations.  If the astropy data cache does not have the required IERS
data file then astropy will request the file from the IERS service.  This will
occur the first time such a transform is done for a new setup or on a new
machine.  Here is an example that shows the typical download progress bar:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.time</span> <span class="kn">import</span> <span class="n">Time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Time</span><span class="p">(</span><span class="s">&#39;2016:001&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">ut1</span>  
<span class="go">Downloading http://maia.usno.navy.mil/ser7/finals2000A.all</span>
<span class="go">|==================================================================| 3.0M/3.0M (100.00%)         6s</span>
<span class="go">&lt;Time object: scale=&#39;ut1&#39; format=&#39;yday&#39; value=2016:001:00:00:00.082&gt;</span>
</pre></div>
</div>
<p>Note that you can forcibly clear the download cache as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.utils.data</span> <span class="kn">import</span> <span class="n">clear_download_cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clear_download_cache</span><span class="p">()</span>
</pre></div>
</div>
<p>The default IERS data used automically is updated by the service every 7 days
and includes transforms dating back to 1973-01-01.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="../api/astropy.utils.iers.IERS_Auto.html#astropy.utils.iers.IERS_Auto" title="astropy.utils.iers.IERS_Auto"><code class="xref py py-class docutils literal"><span class="pre">IERS_Auto</span></code></a> class contains machinery
to ensure that the IERS table is kept up to date by auto-downloading the
latest version as needed.  This means that the IERS table is assured of
having the state-of-the-art definitive and predictive values for Earth
rotation.  As a user it is <strong>your responsibility</strong> to understand the
accuracy of IERS predictions if your science depends on that.  If you
request <code class="docutils literal"><span class="pre">UT1-UTC</span></code> or polar motions for times beyond the range of IERS
table data then the nearest available values will be provided.</p>
</div>
</div>
<div class="section" id="configuration-parameters">
<h3>Configuration parameters<a class="headerlink" href="#configuration-parameters" title="Permalink to this headline">¶</a></h3>
<p>There are three configuration parameters that control the behavior
of the automatic IERS downloading:</p>
<blockquote>
<div><dl class="docutils">
<dt>auto_download:</dt>
<dd>Enable auto-downloading of the latest IERS data.  If set to <code class="docutils literal"><span class="pre">False</span></code> then
the local IERS-B file will be used by default (even if the full IERS file
with predictions was already downloaded and cached).  This replicates the
behavior prior to astropy 1.2.  (default= <code class="docutils literal"><span class="pre">True</span></code>)</dd>
<dt>auto_max_age:</dt>
<dd>Maximum age of predictive data before auto-downloading (days).  See
next section for details. (default=30)</dd>
<dt>iers_auto_url:</dt>
<dd>URL for auto-downloading IERS file data</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="auto-refresh-behavior">
<h3>Auto refresh behavior<a class="headerlink" href="#auto-refresh-behavior" title="Permalink to this headline">¶</a></h3>
<p>The first time that one attempts a time or coordinate transformation that
requires IERS data, the latest version of the IERS table (from 1973 through
one year into the future) will be downloaded and stored in the astropy cache.</p>
<p>Transformations will then use the cached data file if possible.  However, the
<code class="docutils literal"><span class="pre">IERS_Auto</span></code> table is automatically updated in place from the network if the
following two conditions a met when the table is queried for <code class="docutils literal"><span class="pre">UT1-UTC</span></code> or
polar motion values:</p>
<ul class="simple">
<li>Any of the requested IERS values are <em>predictive</em>, meaning that they have
been extrapolated into the future with a model that is fit to measured data.
The IERS table contains approximately one year of predictive data from the
time it is created.</li>
<li>The first predictive values in the table are at least <code class="docutils literal"><span class="pre">conf.auto_max_age</span>
<span class="pre">days</span></code> old relative to the current actual time (i.e. <code class="docutils literal"><span class="pre">Time.now()</span></code>).  This
means that the IERS table is out of date and a newer version can be found on
the IERS service.</li>
</ul>
<p>The IERS Service provides the default online table
(<a class="reference external" href="http://maia.usno.navy.mil/ser7/finals2000A.all">http://maia.usno.navy.mil/ser7/finals2000A.all</a>) and updates the content
once each 7 days.  The default value of <code class="docutils literal"><span class="pre">auto_max_age</span></code> is 30 days to avoid
unnecessary network access, but one can reduce this to as low as 10 days.</p>
</div>
<div class="section" id="working-offline">
<h3>Working offline<a class="headerlink" href="#working-offline" title="Permalink to this headline">¶</a></h3>
<p>If you are working without an internet connection and doing transfomations
that require IERS data, there are a couple of options.</p>
<p><strong>Disable auto downloading</strong></p>
<p>Here you can do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.utils</span> <span class="kn">import</span> <span class="n">iers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iers</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">auto_download</span> <span class="o">=</span> <span class="bp">False</span>  
</pre></div>
</div>
<p>In this case any transforms will use the bundled IERS-B data which covers
the time range from 1962 to just before the astropy release date.  Any
transforms outside of this range will not be allowed.</p>
<p><strong>Set the auto-download max age parameter</strong></p>
<p><em>Only do this if you understand what you are doing, THIS CAN GIVE INACCURATE
ANSWERS!</em> Assuming you have previously been connected to the internet and have
downloaded and cached the IERS auto values previously, then do the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">iers</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">auto_max_age</span> <span class="o">=</span> <span class="bp">None</span>  
</pre></div>
</div>
<p>This disables the check of whether the IERS values are sufficently recent, and
all the transformations (even those outside the time range of available IERS
data) will succeed with at most warnings.</p>
</div>
<div class="section" id="direct-table-access">
<h3>Direct table access<a class="headerlink" href="#direct-table-access" title="Permalink to this headline">¶</a></h3>
<p>In most cases the automatic interface will suffice, but you may need to
directly load and manipulate IERS tables.  IERS-B values are provided as
part of astropy and can be used for transformations.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.utils</span> <span class="kn">import</span> <span class="n">iers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Time</span><span class="p">(</span><span class="s">&#39;2010:001&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iers_b</span> <span class="o">=</span> <span class="n">iers</span><span class="o">.</span><span class="n">IERS_B</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iers_b</span><span class="o">.</span><span class="n">ut1_utc</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">&lt;Quantity 0.1140749 s&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">delta_ut1_utc</span> <span class="o">=</span> <span class="n">iers_b</span><span class="o">.</span><span class="n">ut1_utc</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">ut1</span><span class="o">.</span><span class="n">iso</span>
<span class="go">&#39;2010-01-01 00:00:00.114&#39;</span>
</pre></div>
</div>
<p>Instead of local copies of IERS files, one can also download them, using
<code class="docutils literal"><span class="pre">iers.IERS_A_URL</span></code> and <code class="docutils literal"><span class="pre">iers.IERS_B_URL</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">iers_a</span> <span class="o">=</span> <span class="n">iers</span><span class="o">.</span><span class="n">IERS_A</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">iers</span><span class="o">.</span><span class="n">IERS_A_URL</span><span class="p">)</span>  
</pre></div>
</div>
<p>For coordinate transformations that require IERS polar motion values,
setting the values manually can be done as follows (where one could also
select IERS_B):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">iers</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">auto_download</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iers</span><span class="o">.</span><span class="n">IERS</span><span class="o">.</span><span class="n">iers_table</span> <span class="o">=</span> <span class="n">iers</span><span class="o">.</span><span class="n">IERS_A</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">iers</span><span class="o">.</span><span class="n">IERS_A_URL</span><span class="p">)</span>  
</pre></div>
</div>
<p>To see the internal IERS data that gets used in astropy you can do the
following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dat</span> <span class="o">=</span> <span class="n">iers</span><span class="o">.</span><span class="n">IERS_Auto</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">dat</span>  
<span class="go">&lt;IERS_Auto length=16196&gt;</span>
<span class="go"> year month  day    MJD   PolPMFlag_A ... UT1Flag    PM_x     PM_y   PolPMFlag</span>
<span class="go">                     d                ...           arcsec   arcsec</span>
<span class="go">int64 int64 int64 float64     str1    ... unicode1 float64  float64   unicode1</span>
<span class="go">----- ----- ----- ------- ----------- ... -------- -------- -------- ---------</span>
<span class="go">   73     1     2 41684.0           I ...        B    0.143    0.137         B</span>
<span class="go">   73     1     3 41685.0           I ...        B    0.141    0.134         B</span>
<span class="go">   73     1     4 41686.0           I ...        B    0.139    0.131         B</span>
<span class="go">   73     1     5 41687.0           I ...        B    0.137    0.128         B</span>
<span class="go">  ...   ...   ...     ...         ... ...      ...      ...      ...       ...</span>
<span class="go">   17     5     2 57875.0           P ...        P 0.007211  0.44884         P</span>
<span class="go">   17     5     3 57876.0           P ...        P 0.008757 0.450321         P</span>
<span class="go">   17     5     4 57877.0           P ...        P 0.010328 0.451777         P</span>
<span class="go">   17     5     5 57878.0           P ...        P 0.011924 0.453209         P</span>
<span class="go">   17     5     6 57879.0           P ...        P 0.013544 0.454617         P</span>
</pre></div>
</div>
<p>The explanation for most of the columns can be found in the file named
<code class="docutils literal"><span class="pre">iers.IERS_A_README</span></code>.  The important columns of this table are MJD, UT1_UTC,
UT1Flag, PM_x, PM_y, PolPMFlag:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dat</span><span class="p">[</span><span class="s">&#39;MJD&#39;</span><span class="p">,</span> <span class="s">&#39;UT1_UTC&#39;</span><span class="p">,</span> <span class="s">&#39;UT1Flag&#39;</span><span class="p">,</span> <span class="s">&#39;PM_x&#39;</span><span class="p">,</span> <span class="s">&#39;PM_y&#39;</span><span class="p">,</span> <span class="s">&#39;PolPMFlag&#39;</span><span class="p">]</span>  
<span class="go">&lt;IERS_Auto length=16196&gt;</span>
<span class="go">  MJD    UT1_UTC   UT1Flag    PM_x     PM_y   PolPMFlag</span>
<span class="go">   d        s                arcsec   arcsec</span>
<span class="go">float64  float64   unicode1 float64  float64   unicode1</span>
<span class="go">------- ---------- -------- -------- -------- ---------</span>
<span class="go">41684.0     0.8075        B    0.143    0.137         B</span>
<span class="go">41685.0     0.8044        B    0.141    0.134         B</span>
<span class="go">41686.0     0.8012        B    0.139    0.131         B</span>
<span class="go">41687.0     0.7981        B    0.137    0.128         B</span>
<span class="go">    ...        ...      ...      ...      ...       ...</span>
<span class="go">57875.0 -0.6545408        P 0.007211  0.44884         P</span>
<span class="go">57876.0 -0.6559528        P 0.008757 0.450321         P</span>
<span class="go">57877.0 -0.6573705        P 0.010328 0.451777         P</span>
<span class="go">57878.0 -0.6587712        P 0.011924 0.453209         P</span>
<span class="go">57879.0  -0.660187        P 0.013544 0.454617         P</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">IERS data access (<code class="docutils literal"><span class="pre">astropy.utils.iers</span></code>)</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#getting-started">Getting started</a><ul>
<li><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li><a class="reference internal" href="#configuration-parameters">Configuration parameters</a></li>
<li><a class="reference internal" href="#auto-refresh-behavior">Auto refresh behavior</a></li>
<li><a class="reference internal" href="#working-offline">Working offline</a></li>
<li><a class="reference internal" href="#direct-table-access">Direct table access</a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="http://github.com/astropy/astropy/tree/master/docs/utils/iers.rst">Edit This Page on Github</a> &nbsp;
    <a href="../_sources/utils/iers.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011-2016, The Astropy Developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1. &nbsp;
    Last built 10 Jun 2016. <br/>
  </p>
</footer>
  </body>
</html>