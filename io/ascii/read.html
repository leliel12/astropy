<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Reading tables &mdash; Astropy v1.2.dev15690</title>
    
    <link rel="stylesheet" href="../../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.2.dev15690',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../../_static/astropy_logo.ico"/>
    <link rel="top" title="Astropy v1.2.dev15690" href="../../index.html" />
    <link rel="up" title="ASCII Tables (astropy.io.ascii)" href="index.html" />
    <link rel="next" title="Writing tables" href="write.html" />
    <link rel="prev" title="ASCII Tables (astropy.io.ascii)" href="index.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>
<script type="text/javascript" src="../../_static/copybutton.js"></script>


  </head>
  <body role="document">
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="write.html" title="Writing tables">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="index.html" title="ASCII Tables (astropy.io.ascii)">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../../index.html">Astropy v1.2.dev15690</a>
	 &raquo;
      </li>
      <li><a href="index.html" accesskey="U">ASCII Tables (<code class="docutils literal"><span class="pre">astropy.io.ascii</span></code>)</a> &raquo;</li>
      
      <li>Reading tables</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="reading-tables">
<span id="astropy-io-ascii-read"></span><h1>Reading tables<a class="headerlink" href="#reading-tables" title="Permalink to this headline">¶</a></h1>
<p>The majority of commonly encountered ASCII tables can be easily read with the <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a>
function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.io</span> <span class="kn">import</span> <span class="n">ascii</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>  
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">table</span></code> is the name of a file, a string representation of a table, or a
list of table lines.  The return value (<code class="docutils literal"><span class="pre">data</span></code> in this case) is a <a class="reference internal" href="../../table/index.html#astropy-table"><span>Table</span></a> object.</p>
<p>By default <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> will try to <a class="reference external" href="#guess-table-format">guess the table format</a>
by trying all the supported formats.  If this does not work (for unusually
formatted tables) then one needs give <a class="reference internal" href="index.html#module-astropy.io.ascii" title="astropy.io.ascii"><code class="xref py py-obj docutils literal"><span class="pre">astropy.io.ascii</span></code></a> additional hints about the
format, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;t/nls1_stackinfo.dbout&#39;</span><span class="p">,</span> <span class="n">data_start</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;|&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;t/simple.txt&#39;</span><span class="p">,</span> <span class="n">quotechar</span><span class="o">=</span><span class="s">&quot;&#39;&quot;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;t/simple4.txt&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;no_header&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;|&#39;</span><span class="p">)</span>  
</pre></div>
</div>
<p>The <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> function accepts a number of parameters that specify the detailed
table format.  Different formats can define different defaults, so the
descriptions below sometimes mention &#8220;typical&#8221; default values.  This refers to
the <a class="reference internal" href="../../api/astropy.io.ascii.Basic.html#astropy.io.ascii.Basic" title="astropy.io.ascii.Basic"><code class="xref py py-class docutils literal"><span class="pre">Basic</span></code></a> format reader and other similar character-separated formats.</p>
<div class="section" id="parameters-for-read">
<span id="io-ascii-read-parameters"></span><h2>Parameters for <code class="docutils literal"><span class="pre">read()</span></code><a class="headerlink" href="#parameters-for-read" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>table</strong> <span class="classifier-delimiter">:</span> <span class="classifier">input table</span></dt>
<dd><p class="first">There are four ways to specify the table to be read:</p>
<ul class="simple">
<li>Name of a file (string)</li>
<li>Single string containing all table lines separated by newlines</li>
<li>File-like object with a callable read() method</li>
<li>List of strings where each list element is a table line</li>
</ul>
<p class="last">The first two options are distinguished by the presence of a newline in the string.
This assumes that valid file names will not normally contain a newline.</p>
</dd>
<dt><strong>format</strong> <span class="classifier-delimiter">:</span> <span class="classifier">file format (default=&#8217;basic&#8217;)</span></dt>
<dd>This specifies the top-level format of the ASCII table, for example
if it is a basic character delimited table, fixed format table, or
a CDS-compatible table, etc.  The value of this parameter must
be one of the <a class="reference internal" href="index.html#supported-formats"><span>Supported formats</span></a>.</dd>
<dt><strong>guess</strong> <span class="classifier-delimiter">:</span> <span class="classifier">try to guess table format (default=True)</span></dt>
<dd>If set to True then <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> will try to guess the table format by cycling
through a number of possible table format permutations and attempting to read
the table in each case.  See the <a class="reference internal" href="#guess-table-format">Guess table format</a> section for further details.</dd>
<dt><strong>delimiter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">column delimiter string</span></dt>
<dd>A one-character string used to separate fields which typically defaults to
the space character.  Other common values might be &#8220;\s&#8221; (whitespace), &#8221;,&#8221; or
&#8220;|&#8221; or &#8220;\t&#8221; (tab).  A value of &#8220;\s&#8221; allows any combination of the tab and
space characters to delimit columns.</dd>
<dt><strong>comment</strong> <span class="classifier-delimiter">:</span> <span class="classifier">regular expression defining a comment line in table</span></dt>
<dd>If the <code class="docutils literal"><span class="pre">comment</span></code> regular expression matches the beginning of a table line then that line
will be discarded from header or data processing.  For the <code class="docutils literal"><span class="pre">basic</span></code> format this
defaults to &#8220;\s*#&#8221; (any whitespace followed by #).</dd>
<dt><strong>quotechar</strong> <span class="classifier-delimiter">:</span> <span class="classifier">one-character string to quote fields containing special characters</span></dt>
<dd>This specifies the quote character and will typically be either the single or double
quote character.  This is can be useful for reading text fields with spaces in a space-delimited
table.  The default is typically the double quote.</dd>
<dt><strong>header_start</strong> <span class="classifier-delimiter">:</span> <span class="classifier">line index for the header line</span></dt>
<dd>This includes only significant non-comment lines and counting starts at 0. If
set to None this indicates that there is no header line and the column names
will be auto-generated.  See <a class="reference internal" href="#specifying-header-and-data-location">Specifying header and data location</a> for more
details.</dd>
<dt><strong>data_start</strong> <span class="classifier-delimiter">:</span> <span class="classifier">line index for the start of data counting</span></dt>
<dd>This includes only significant non-comment lines and counting starts at 0.  See
<a class="reference internal" href="#specifying-header-and-data-location">Specifying header and data location</a> for more details.</dd>
<dt><strong>data_end</strong> <span class="classifier-delimiter">:</span> <span class="classifier">line index for the end of data</span></dt>
<dd>This includes only significant non-comment line and can be negative to count
from end.  See <a class="reference internal" href="#specifying-header-and-data-location">Specifying header and data location</a> for more details.</dd>
<dt><strong>converters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict of data type converters</span></dt>
<dd>See the <a class="reference internal" href="#converters">Converters</a> section for more information.</dd>
<dt><strong>names</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of names corresponding to each data column</span></dt>
<dd>Define the complete list of names for each data column.  This will override
names found in the header (if it exists).  If not supplied then
use names from the header or auto-generated names if there is no header.</dd>
<dt><strong>include_names</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of names to include in output</span></dt>
<dd>From the list of column names found from the header or the <code class="docutils literal"><span class="pre">names</span></code>
parameter, select for output only columns within this list.  If not supplied
then include all names.</dd>
<dt><strong>exclude_names</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of names to exclude from output</span></dt>
<dd>Exclude these names from the list of output columns.  This is applied <em>after</em>
the <code class="docutils literal"><span class="pre">include_names</span></code> filtering.  If not specified then no columns are excluded.</dd>
<dt><strong>fill_values</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of fill value specifiers</span></dt>
<dd>Specify input table entries which should be masked in the output table
because they are bad or missing.  See the <a class="reference internal" href="#bad-or-missing-values">Bad or missing values</a> section
for more information and examples.  The default is that any blank table
values are treated as missing.</dd>
<dt><strong>fill_include_names</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of column names, which are affected by <code class="docutils literal"><span class="pre">fill_values</span></code>.</span></dt>
<dd>If not supplied, then <code class="docutils literal"><span class="pre">fill_values</span></code> can affect all columns.</dd>
<dt><strong>fill_exclude_names</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of column names, which are not affected by <code class="docutils literal"><span class="pre">fill_values</span></code>.</span></dt>
<dd>If not supplied, then <code class="docutils literal"><span class="pre">fill_values</span></code> can affect all columns.</dd>
<dt><strong>Outputter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Outputter class</span></dt>
<dd>This converts the raw data tables value into the
output object that gets returned by <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a>.  The default is
<a class="reference internal" href="../../api/astropy.io.ascii.TableOutputter.html#astropy.io.ascii.TableOutputter" title="astropy.io.ascii.TableOutputter"><code class="xref py py-class docutils literal"><span class="pre">TableOutputter</span></code></a>, which returns a
<a class="reference internal" href="../../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal"><span class="pre">Table</span></code></a> object (see <a class="reference internal" href="../../table/index.html#astropy-table"><span>Data Tables</span></a>).</dd>
<dt><strong>Inputter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Inputter class</span></dt>
<dd>This is generally not specified.</dd>
</dl>
<p><strong>data_Splitter</strong> : Splitter class to split data columns</p>
<p><strong>header_Splitter</strong> : Splitter class to split header columns</p>
<dl class="docutils">
<dt><strong>fast_reader</strong> <span class="classifier-delimiter">:</span> <span class="classifier">whether to use the C engine</span></dt>
<dd>This can be <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code>, and also be a dict with options.
(see <a class="reference internal" href="fast_ascii_io.html#fast-ascii-io"><span>Fast ASCII I/O</span></a>)</dd>
<dt><strong>Reader</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Reader class (<em>deprecated</em> in favor of <code class="docutils literal"><span class="pre">format</span></code>)</span></dt>
<dd>This specifies the top-level format of the ASCII table, for example
if it is a basic character delimited table, fixed format table, or
a CDS-compatible table, etc.  The value of this parameter must
be a Reader class.  For basic usage this means one of the
built-in <a class="reference internal" href="extension_classes.html#extension-reader-classes"><span>Extension Reader classes</span></a>.</dd>
</dl>
</div>
<div class="section" id="specifying-header-and-data-location">
<h2>Specifying header and data location<a class="headerlink" href="#specifying-header-and-data-location" title="Permalink to this headline">¶</a></h2>
<p>The three parameters <code class="docutils literal"><span class="pre">header_start</span></code>, <code class="docutils literal"><span class="pre">data_start</span></code> and <code class="docutils literal"><span class="pre">data_end</span></code> make it
possible to read a table file that has extraneous non-table data included.
This is a case where you need to help out <code class="docutils literal"><span class="pre">io.ascii</span></code> and tell it where to
find the header and data.</p>
<p>When processing of a file into a header and data components any blank lines
(which might have whitespace characters) and commented lines (starting with the
comment character, typically <code class="docutils literal"><span class="pre">#</span></code>) are stripped out <em>before</em> the header and data
parsing code sees the table content. For example imagine you have the file
below. The column on the left is not part of the file but instead shows how
<code class="docutils literal"><span class="pre">io.ascii</span></code> is viewing each line and the line count index.</p>
<div class="highlight-python"><div class="highlight"><pre>Index    Table content
------ ----------------------------------------------------------------
   -  | # This is the start of my data file
   -  |
   0  | Automatically generated by my_script.py at 2012-01-01T12:13:14
   1  | Run parameters: None
   2  | Column header line:
   -  |
   3  | x y z
   -  |
   4  | Data values section:
   -  |
   5  | 1 2 3
   6  | 4 5 6
   -  |
   7  | Run completed at 2012:01-01T12:14:01
</pre></div>
</div>
<p>In this case you would have <code class="docutils literal"><span class="pre">header_start=3</span></code>, <code class="docutils literal"><span class="pre">data_start=5</span></code>, and
<code class="docutils literal"><span class="pre">data_end=7</span></code>.  The convention for <code class="docutils literal"><span class="pre">data_end</span></code> follows the normal Python
slicing convention where to select data rows 5 and 6 you would do
<code class="docutils literal"><span class="pre">rows[5:7]</span></code>.  For <code class="docutils literal"><span class="pre">data_end</span></code> you can also supply a negative index to
count backward from the end, so <code class="docutils literal"><span class="pre">data_end=-1</span></code> (like <code class="docutils literal"><span class="pre">rows[5:-1]</span></code>) would
work in this case.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Prior to astropy v1.1 there was a bug in which a blank line that had one or
more whitespace characters was mistakenly counted for <code class="docutils literal"><span class="pre">header_start</span></code> but
was (correctly) not counted for <code class="docutils literal"><span class="pre">data_start</span></code> and <code class="docutils literal"><span class="pre">data_end</span></code>.  If you
have code that was depending on the incorrect pre-1.1 behavior then it needs
to be modified.</p>
</div>
</div>
<div class="section" id="bad-or-missing-values">
<span id="replace-bad-or-missing-values"></span><h2>Bad or missing values<a class="headerlink" href="#bad-or-missing-values" title="Permalink to this headline">¶</a></h2>
<p>ASCII data tables can contain bad or missing values.  A common case is when a table
contains blank entries with no available data, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">weather_data</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s">  day,precip,type</span>
<span class="gp">... </span><span class="s">  Mon,1.5,rain</span>
<span class="gp">... </span><span class="s">  Tues,,</span>
<span class="gp">... </span><span class="s">  Wed,1.1,snow</span>
<span class="gp">... </span><span class="s">  &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>By default <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> will interpret blank entries as being bad/missing and output a masked
Table with those entries masked out by setting the corresponding mask value set to
<code class="docutils literal"><span class="pre">True</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dat</span> <span class="o">=</span> <span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">weather_data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span>
<span class="go">day  precip type</span>
<span class="go">---- ------ ----</span>
<span class="go"> Mon    1.5 rain</span>
<span class="go">Tues     --   --</span>
<span class="go"> Wed    1.1 snow</span>
</pre></div>
</div>
<p>If you want to replace the masked (missing) values with particular values, set the masked
column <code class="docutils literal"><span class="pre">fill_value</span></code> attribute and then get the &#8220;filled&#8221; version of the table.  This
looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dat</span><span class="p">[</span><span class="s">&#39;precip&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fill_value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">999</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dat</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fill_value</span> <span class="o">=</span> <span class="s">&#39;N/A&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">dat</span><span class="o">.</span><span class="n">filled</span><span class="p">())</span>
<span class="go">day  precip type</span>
<span class="go">---- ------ ----</span>
<span class="go"> Mon    1.5 rain</span>
<span class="go">Tues -999.0  N/A</span>
<span class="go"> Wed    1.1 snow</span>
</pre></div>
</div>
<p>ASCII tables may also have other indicators of bad or missing data.  For
example a table may contain string values that are not a valid representation
of a number, e.g. <code class="docutils literal"><span class="pre">&quot;...&quot;</span></code>, or a table may have special values like <code class="docutils literal"><span class="pre">-999</span></code>
that are chosen to indicate missing data.  The <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> function has a flexible
system to accommodate these cases by marking specified character sequences in
the input data as &#8220;missing data&#8221; during the conversion process.  Whenever
missing data is found then the output will be a masked table.</p>
<p>This is done with the <code class="docutils literal"><span class="pre">fill_values</span></code> keyword argument, which can be set to a
single missing-value specification <code class="docutils literal"><span class="pre">&lt;missing_spec&gt;</span></code> or a list of <code class="docutils literal"><span class="pre">&lt;missing_spec&gt;</span></code> tuples:</p>
<div class="highlight-python"><div class="highlight"><pre>fill_values = &lt;missing_spec&gt; | [&lt;missing_spec1&gt;, &lt;missing_spec2&gt;, ...]
&lt;missing_spec&gt; = (&lt;match_string&gt;, &#39;0&#39;, &lt;optional col name 1&gt;, &lt;optional col name 2&gt;, ...)
</pre></div>
</div>
<p>When reading a table the second element of a <code class="docutils literal"><span class="pre">&lt;missing_spec&gt;</span></code> should always
be the string <code class="docutils literal"><span class="pre">'0'</span></code>,
otherwise you may get unexpected behavior <a class="footnote-reference" href="#f1" id="id1">[1]</a>.  By default the
<code class="docutils literal"><span class="pre">&lt;missing_spec&gt;</span></code> is applied to all columns unless column name strings are
supplied.  An alterate way to limit the columns is via the
<code class="docutils literal"><span class="pre">fill_include_names</span></code> and <code class="docutils literal"><span class="pre">fill_exclude_names</span></code> keyword arguments in <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a>.</p>
<p>In the example below we read back the weather table after filling the missing
values in with typical placeholders:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;day   precip  type&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39; Mon     1.5  rain&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39;Tues  -999.0   N/A&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39; Wed     1.1  snow&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">fill_values</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;-999.0&#39;</span><span class="p">,</span> <span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="s">&#39;precip&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;N/A&#39;</span><span class="p">,</span> <span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">day  precip type</span>
<span class="go">---- ------ ----</span>
<span class="go"> Mon    1.5 rain</span>
<span class="go">Tues     --   --</span>
<span class="go"> Wed    1.1 snow</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default in <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> is <code class="docutils literal"><span class="pre">fill_values=('','0')</span></code>.  This marks blank entries as being
missing for any data type (int, float, or string).  If <code class="docutils literal"><span class="pre">fill_values</span></code> is explicitly
set in the call to <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> then the default behavior of marking blank entries as missing
no longer applies.  For instance setting <code class="docutils literal"><span class="pre">fill_values=None</span></code> will disable this
auto-masking without setting any other fill values.  This can be useful for a string
column where one of values happens to be <code class="docutils literal"><span class="pre">&quot;&quot;</span></code>.</p>
</div>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>The requirement to put the <code class="docutils literal"><span class="pre">'0'</span></code> there is the legacy of an old
interface which is maintained for backward compatibility and also to
match the format of <code class="docutils literal"><span class="pre">fill_value</span></code> for reading with the format of
<code class="docutils literal"><span class="pre">fill_value</span></code> used for writing tables. On reading, the second
element of the <code class="docutils literal"><span class="pre">&lt;missing_spec&gt;</span></code> tuple can actually be an arbitrary
string value which replaces occurrences of the <code class="docutils literal"><span class="pre">&lt;match_string&gt;</span></code>
string in the input stream prior to type conversion.  This ends up
being the value &#8220;behind the mask&#8221;, which should never be directly
accessed.  Only the value <code class="docutils literal"><span class="pre">'0'</span></code> is neutral when attempting to detect
the column data type and perform type conversion.  For instance if you
used <code class="docutils literal"><span class="pre">'nan'</span></code> for the <code class="docutils literal"><span class="pre">&lt;match_string&gt;</span></code> value then integer columns
would wind up as float.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="guess-table-format">
<h2>Guess table format<a class="headerlink" href="#guess-table-format" title="Permalink to this headline">¶</a></h2>
<p>If the <code class="docutils literal"><span class="pre">guess</span></code> parameter in <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> is set to True (which is the default) then
<a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> will try to guess the table format by cycling through a number of
possible table format permutations and attempting to read the table in each case.
The first format which succeeds and will be used to read the table. To succeed
the table must be successfully parsed by the Reader and satisfy the following
column requirements:</p>
<blockquote>
<div><ul class="simple">
<li>At least two table columns</li>
<li>No column names are a float or int number</li>
<li>No column names begin or end with space, comma, tab, single quote, double quote, or
a vertical bar (|).</li>
</ul>
</div></blockquote>
<p>These requirements reduce the chance for a false positive where a table is
successfully parsed with the wrong format.  A common situation is a table
with numeric columns but no header row, and in this case <code class="docutils literal"><span class="pre">astropy.io.ascii</span></code> will
auto-assign column names because of the restriction on column names that
look like a number.</p>
<div class="section" id="guess-order">
<h3>Guess order<a class="headerlink" href="#guess-order" title="Permalink to this headline">¶</a></h3>
<p>The order of guessing is shown by this Python code, where <code class="docutils literal"><span class="pre">Reader</span></code> is the
class which actually implements reading the different file formats:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">Reader</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Ecsv</span><span class="p">,</span> <span class="n">FixedWidthTwoLine</span><span class="p">,</span> <span class="n">FastBasic</span><span class="p">,</span> <span class="n">Basic</span><span class="p">,</span>
               <span class="n">Rdb</span><span class="p">,</span> <span class="n">FastTab</span><span class="p">,</span> <span class="n">Tab</span><span class="p">,</span> <span class="n">Cds</span><span class="p">,</span> <span class="n">Daophot</span><span class="p">,</span> <span class="n">SExtractor</span><span class="p">,</span>
               <span class="n">Ipac</span><span class="p">,</span> <span class="n">Latex</span><span class="p">,</span> <span class="n">AASTex</span><span class="p">):</span>
    <span class="n">read</span><span class="p">(</span><span class="n">Reader</span><span class="o">=</span><span class="n">Reader</span><span class="p">)</span>

<span class="k">for</span> <span class="n">Reader</span> <span class="ow">in</span> <span class="p">(</span><span class="n">CommentedHeader</span><span class="p">,</span> <span class="n">FastBasic</span><span class="p">,</span> <span class="n">Basic</span><span class="p">,</span> <span class="n">FastNoHeader</span><span class="p">,</span> <span class="n">NoHeader</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">delimiter</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;|&quot;</span><span class="p">,</span> <span class="s">&quot;,&quot;</span><span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">s&quot;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">quotechar</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s">&quot;&#39;&quot;</span><span class="p">):</span>
            <span class="n">read</span><span class="p">(</span><span class="n">Reader</span><span class="o">=</span><span class="n">Reader</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="n">delimiter</span><span class="p">,</span> <span class="n">quotechar</span><span class="o">=</span><span class="n">quotechar</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the <a class="reference internal" href="../../api/astropy.io.ascii.FixedWidth.html#astropy.io.ascii.FixedWidth" title="astropy.io.ascii.FixedWidth"><code class="xref py py-class docutils literal"><span class="pre">FixedWidth</span></code></a> derived-readers are not included
in the default guess sequence (this causes problems), so to read such tables
one must explicitly specify the format with the <code class="docutils literal"><span class="pre">format</span></code> keyword. Also notice
that formats compatible with the fast reading engine attempt to use the fast
engine before the ordinary reading engine.</p>
<p>If none of the guesses succeed in reading the table (subject to the column
requirements) a final try is made using just the user-supplied parameters but
without checking the column requirements.  In this way a table with only one
column or column names that look like a number can still be successfully read.</p>
<p>The guessing process respects any values of the Reader, delimiter, and
quotechar parameters that were supplied to the read() function.  Any guesses
that would conflict are skipped.  For example the call:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">Reader</span><span class="o">=</span><span class="n">ascii</span><span class="o">.</span><span class="n">NoHeader</span><span class="p">,</span> <span class="n">quotechar</span><span class="o">=</span><span class="s">&quot;&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>would only try the four delimiter possibilities, skipping all the conflicting
Reader and quotechar combinations.</p>
</div>
<div class="section" id="disabling">
<h3>Disabling<a class="headerlink" href="#disabling" title="Permalink to this headline">¶</a></h3>
<p>Guessing can be disabled in two ways:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">astropy.io.ascii</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>               <span class="c"># guessing enabled by default</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">guess</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>  <span class="c"># disable for this call</span>
<span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">set_guess</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>                 <span class="c"># set default to False globally</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>               <span class="c"># guessing disabled</span>
</pre></div>
</div>
</div>
<div class="section" id="debugging">
<h3>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h3>
<p>In order to get more insight into the guessing process and possibly debug if
something isn&#8217;t working as expected, use the
<a class="reference internal" href="../../api/astropy.io.ascii.get_read_trace.html#astropy.io.ascii.get_read_trace" title="astropy.io.ascii.get_read_trace"><code class="xref py py-obj docutils literal"><span class="pre">get_read_trace()</span></code></a> function.  This returns a traceback of the
attempted read formats for the last call to <a class="reference internal" href="../../api/astropy.io.ascii.read.html#astropy.io.ascii.read" title="astropy.io.ascii.read"><code class="xref py py-obj docutils literal"><span class="pre">read()</span></code></a>.</p>
</div>
</div>
<div class="section" id="comments-and-metadata">
<h2>Comments and metadata<a class="headerlink" href="#comments-and-metadata" title="Permalink to this headline">¶</a></h2>
<p>Any comment lines detected during reading are inserted into the output table
via the <code class="docutils literal"><span class="pre">comments</span></code> key in the table&#8217;s <code class="docutils literal"><span class="pre">.meta</span></code> dictionary. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span><span class="o">=</span><span class="s">&#39;&#39;&#39;# TELESCOPE = 30 inch</span>
<span class="gp">... </span><span class="s">         # TARGET = PV Ceph</span>
<span class="gp">... </span><span class="s">         # BAND = V</span>
<span class="gp">... </span><span class="s">         MJD mag</span>
<span class="gp">... </span><span class="s">         55555 12.3</span>
<span class="gp">... </span><span class="s">         55556 12.4&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dat</span> <span class="o">=</span> <span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">dat</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s">&#39;comments&#39;</span><span class="p">])</span>
<span class="go">[&#39;TELESCOPE = 30 inch&#39;, &#39;TARGET = PV Ceph&#39;, &#39;BAND = V&#39;]</span>
</pre></div>
</div>
<p>While <a class="reference internal" href="index.html#module-astropy.io.ascii" title="astropy.io.ascii"><code class="xref py py-mod docutils literal"><span class="pre">astropy.io.ascii</span></code></a> will not do any post-processing on comment lines,
custom post-processing can be accomplished by re-reading with the metadata line
comments. Here is one example, where comments are of the form &#8220;# KEY = VALUE&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">header</span> <span class="o">=</span> <span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">dat</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s">&#39;comments&#39;</span><span class="p">],</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">&#39;=&#39;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">format</span><span class="o">=</span><span class="s">&#39;no_header&#39;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;key&#39;</span><span class="p">,</span> <span class="s">&#39;val&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
<span class="go">   key      val</span>
<span class="go">--------- -------</span>
<span class="go">TELESCOPE 30 inch</span>
<span class="go">   TARGET PV Ceph</span>
<span class="go">     BAND       V</span>
</pre></div>
</div>
</div>
<div class="section" id="converters">
<h2>Converters<a class="headerlink" href="#converters" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="index.html#module-astropy.io.ascii" title="astropy.io.ascii"><code class="xref py py-mod docutils literal"><span class="pre">astropy.io.ascii</span></code></a> converts the raw string values from the table into
numeric data types by using converter functions such as the Python <code class="docutils literal"><span class="pre">int</span></code> and
<code class="docutils literal"><span class="pre">float</span></code> functions.  For example <code class="docutils literal"><span class="pre">int(&quot;5.0&quot;)</span></code> will fail while float(&#8220;5.0&#8221;)
will succeed and return 5.0 as a Python float.</p>
<p>The default converters are:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">default_converters</span> <span class="o">=</span> <span class="p">[</span><span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">convert_numpy</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">int</span><span class="p">),</span>
                      <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">convert_numpy</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">),</span>
                      <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">convert_numpy</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">str</span><span class="p">)]</span>
</pre></div>
</div>
<p>These take advantage of the <a class="reference internal" href="../../api/astropy.io.ascii.convert_numpy.html#astropy.io.ascii.convert_numpy" title="astropy.io.ascii.convert_numpy"><code class="xref py py-func docutils literal"><span class="pre">convert_numpy()</span></code></a>
function which returns a 2-element tuple <code class="docutils literal"><span class="pre">(converter_func,</span> <span class="pre">converter_type)</span></code>
as described in the previous section.  The type provided to
<a class="reference internal" href="../../api/astropy.io.ascii.convert_numpy.html#astropy.io.ascii.convert_numpy" title="astropy.io.ascii.convert_numpy"><code class="xref py py-func docutils literal"><span class="pre">convert_numpy()</span></code></a> must be a valid <a class="reference external" href="http://docs.scipy.org/doc/numpy/user/basics.types.html">numpy type</a>, for example
<code class="docutils literal"><span class="pre">numpy.int</span></code>, <code class="docutils literal"><span class="pre">numpy.uint</span></code>, <code class="docutils literal"><span class="pre">numpy.int8</span></code>, <code class="docutils literal"><span class="pre">numpy.int64</span></code>,
<code class="docutils literal"><span class="pre">numpy.float</span></code>, <code class="docutils literal"><span class="pre">numpy.float64</span></code>, <code class="docutils literal"><span class="pre">numpy.str</span></code>.</p>
<p>The default converters for each column can be overridden with the
<code class="docutils literal"><span class="pre">converters</span></code> keyword:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">converters</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;col1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">ascii</span><span class="o">.</span><span class="n">convert_numpy</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint</span><span class="p">)],</span>
<span class="gp">... </span>              <span class="s">&#39;col2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">ascii</span><span class="o">.</span><span class="n">convert_numpy</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ascii</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&#39;file.dat&#39;</span><span class="p">,</span> <span class="n">converters</span><span class="o">=</span><span class="n">converters</span><span class="p">)</span>  
</pre></div>
</div>
</div>
<div class="section" id="advanced-customization">
<h2>Advanced customization<a class="headerlink" href="#advanced-customization" title="Permalink to this headline">¶</a></h2>
<p>Here we provide a few examples that demonstrate how to extend the base
functionality to handle special cases.  To go beyond these simple examples the
best reference is to read the code for the existing
<a class="reference internal" href="extension_classes.html#extension-reader-classes"><span>Extension Reader classes</span></a>.</p>
<p><strong>Define custom readers by class inheritance</strong></p>
<p>The most useful way to define a new reader class is by inheritance.
This is the way all the build-in readers are defined, so there are plenty
of examples in the code.</p>
<p>In most cases, you will define one class to handle the header,
one class that handles the data and a reader class that ties it all together.
Here is a simple example from the code that defines a reader that is just like
the basic reader, but header and data start in different lines of the file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Note: NoHeader is already included in astropy.io.ascii for convenience.</span>
<span class="k">class</span> <span class="nc">NoHeaderHeader</span><span class="p">(</span><span class="n">BasicHeader</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Reader for table header without a header</span>

<span class="sd">    Set the start of header line number to `None`, which tells the basic</span>
<span class="sd">    reader there is no header line.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">start_line</span> <span class="o">=</span> <span class="bp">None</span>

<span class="k">class</span> <span class="nc">NoHeaderData</span><span class="p">(</span><span class="n">BasicData</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Reader for table data without a header</span>

<span class="sd">    Data starts at first uncommented line since there is no header line.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">start_line</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">class</span> <span class="nc">NoHeader</span><span class="p">(</span><span class="n">Basic</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read a table with no header line.  Columns are autonamed using</span>
<span class="sd">    header.auto_format which defaults to &quot;col%d&quot;.  Otherwise this reader</span>
<span class="sd">    the same as the :class:`Basic` class from which it is derived.  Example::</span>

<span class="sd">      # Table data</span>
<span class="sd">      1 2 &quot;hello there&quot;</span>
<span class="sd">      3 4 world</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_format_name</span> <span class="o">=</span> <span class="s">&#39;no_header&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s">&#39;Basic table with no headers&#39;</span>
    <span class="n">header_class</span> <span class="o">=</span> <span class="n">NoHeaderHeader</span>
    <span class="n">data_class</span> <span class="o">=</span> <span class="n">NoHeaderData</span>
</pre></div>
</div>
<p>In a slightly more involved case, the implementation can also override some of
the methods in the base class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Note: CommentedHeader is already included in astropy.io.ascii for convenience.</span>
<span class="k">class</span> <span class="nc">CommentedHeaderHeader</span><span class="p">(</span><span class="n">BasicHeader</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Header class for which the column definition line starts with the</span>
<span class="sd">    comment character.  See the :class:`CommentedHeader` class  for an example.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">process_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return only lines that start with the comment regexp.  For these</span>
<span class="sd">        lines strip out the matching characters.&quot;&quot;&quot;</span>
        <span class="n">re_comment</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comment</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re_comment</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">line</span><span class="p">[</span><span class="n">match</span><span class="o">.</span><span class="n">end</span><span class="p">():]</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_comment</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colnames</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">CommentedHeader</span><span class="p">(</span><span class="n">Basic</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read a file where the column names are given in a line that begins with</span>
<span class="sd">    the header comment character. ``header_start`` can be used to specify the</span>
<span class="sd">    line index of column names, and it can be a negative index (for example -1</span>
<span class="sd">    for the last commented line).  The default delimiter is the &lt;space&gt;</span>
<span class="sd">    character.::</span>

<span class="sd">      # col1 col2 col3</span>
<span class="sd">      # Comment line</span>
<span class="sd">      1 2 3</span>
<span class="sd">      4 5 6</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_format_name</span> <span class="o">=</span> <span class="s">&#39;commented_header&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s">&#39;Column names in a commented line&#39;</span>

    <span class="n">header_class</span> <span class="o">=</span> <span class="n">CommentedHeaderHeader</span>
    <span class="n">data_class</span> <span class="o">=</span> <span class="n">NoHeaderData</span>
</pre></div>
</div>
<p><strong>Define a custom reader functionally</strong>
Instead of defining a new class, it is also possible to obtain an instance
of a reader and then to modify the properties of this one reader instance
in a function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">read_rdb_table</span><span class="p">(</span><span class="n">table</span><span class="p">):</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">Basic</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">delimiter</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">delimiter</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">process_line</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">process_line</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">start_line</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">return</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Create a custom splitter.process_val function</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># The default process_val() normally just strips whitespace.</span>
<span class="c"># In addition have it replace empty fields with -999.</span>
<span class="k">def</span> <span class="nf">process_val</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Custom splitter process_val function: Remove whitespace at the beginning</span>
<span class="sd">    or end of value and substitute -999 for any blank entries.&quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s">&#39;-999&#39;</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="c"># Create an RDB reader and override the splitter.process_val function</span>
<span class="n">rdb_reader</span> <span class="o">=</span> <span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">get_reader</span><span class="p">(</span><span class="n">Reader</span><span class="o">=</span><span class="n">astropy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ascii</span><span class="o">.</span><span class="n">Rdb</span><span class="p">)</span>
<span class="n">rdb_reader</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">process_val</span> <span class="o">=</span> <span class="n">process_val</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Reading tables</a><ul>
<li><a class="reference internal" href="#parameters-for-read">Parameters for <code class="docutils literal"><span class="pre">read()</span></code></a></li>
<li><a class="reference internal" href="#specifying-header-and-data-location">Specifying header and data location</a></li>
<li><a class="reference internal" href="#bad-or-missing-values">Bad or missing values</a></li>
<li><a class="reference internal" href="#guess-table-format">Guess table format</a><ul>
<li><a class="reference internal" href="#guess-order">Guess order</a></li>
<li><a class="reference internal" href="#disabling">Disabling</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#comments-and-metadata">Comments and metadata</a></li>
<li><a class="reference internal" href="#converters">Converters</a></li>
<li><a class="reference internal" href="#advanced-customization">Advanced customization</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="http://github.com/astropy/astropy/tree/master/docs/io/ascii/read.rst">Edit This Page on Github</a> &nbsp;
    <a href="../../_sources/io/ascii/read.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011-2016, The Astropy Developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1. &nbsp;
    Last built 10 Jun 2016. <br/>
  </p>
</footer>
  </body>
</html>