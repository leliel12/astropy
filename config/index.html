<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration system (astropy.config) &mdash; Astropy v1.2.dev14979</title>
    
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.dev14979',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="top" title="Astropy v1.2.dev14979" href="../index.html" />
    <link rel="next" title="Configuration transition" href="config_0_4_transition.html" />
    <link rel="prev" title="WebProfileDialog" href="../api/astropy.vo.samp.WebProfileDialog.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>
<script type="text/javascript" src="../_static/copybutton.js"></script>


  </head>
  <body role="document">
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="config_0_4_transition.html" title="Configuration transition">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="../api/astropy.vo.samp.WebProfileDialog.html" title="WebProfileDialog">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">Astropy v1.2.dev14979</a>
	 &raquo;
      </li>
      
      <li>Configuration system (<code class="docutils literal"><span class="pre">astropy.config</span></code>)</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration-system-astropy-config">
<span id="astropy-config"></span><h1>Configuration system (<a class="reference internal" href="#module-astropy.config" title="astropy.config"><code class="xref py py-obj docutils literal"><span class="pre">astropy.config</span></code></a>)<a class="headerlink" href="#configuration-system-astropy-config" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The astropy configuration system is designed to give users control of various
parameters used in astropy or affiliated packages without delving into the
source code to make those changes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The configuration system got a major overhaul in astropy 0.4 as
part of APE3.  See <a class="reference internal" href="config_0_4_transition.html#config-0-4-transition"><span class="std std-ref">Configuration transition</span></a> for information
about updating code to use the new API.</p>
</div>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>The Astropy configuration options are most easily set by modifying the
configuration file.  It will be automatically generated with all the
default values commented out the first time you import Astropy.  You
can find the exact location by doing:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.config</span> <span class="k">import</span> <span class="n">get_config_dir</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_config_dir</span><span class="p">()</span>
</pre></div>
</div>
<p>And you should see the location of your configuration directory. The standard
scheme generally puts your configuration directory in <code class="docutils literal"><span class="pre">$HOME/.astropy/config</span></code>,
but if you&#8217;ve set the environment variable <code class="docutils literal"><span class="pre">XDG_CONFIG_HOME</span></code> and the
<code class="docutils literal"><span class="pre">$XDG_CONFIG_HOME/astropy</span></code> directory exists, it will instead be there.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a slight variation from the behavior of most Linux
applications with respect to <code class="docutils literal"><span class="pre">$XDG_CONFIG_HOME</span></code>, where the
default, if <code class="docutils literal"><span class="pre">$XDG_CONFIG_HOME</span></code> is not defined, would be to put
configuration in <code class="docutils literal"><span class="pre">~/.config/astropy</span></code>.</p>
</div>
<p>Once you&#8217;ve found the configuration file, open it with your favorite editor.
It should have all of the sections you might want, with descriptions and the
type of the value that is accepted.  Feel free to edit this as you wish, and
any of these changes will be reflected when you next start Astropy.  Or, if you
want to see your changes immediately in your current Astropy session, just do:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.config</span> <span class="k">import</span> <span class="n">reload_config</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reload_config</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If for whatever reason your <code class="docutils literal"><span class="pre">$HOME/.astropy</span></code> directory is not accessible
(i.e., you have astropy running somehow as root but you are not the root
user), the best solution is to set the <code class="docutils literal"><span class="pre">XDG_CONFIG_HOME</span></code> and
<code class="docutils literal"><span class="pre">XDG_CACHE_HOME</span></code> environment variables pointing to directories, and create
an <code class="docutils literal"><span class="pre">astropy</span></code> directory inside each of those.  Both the configuration and
data download systems will then use those directories and never try to
access the <code class="docutils literal"><span class="pre">$HOME/.astropy</span></code> directory.</p>
</div>
</div>
<div class="section" id="using-astropy-config">
<h2>Using <a class="reference internal" href="#module-astropy.config" title="astropy.config"><code class="xref py py-obj docutils literal"><span class="pre">astropy.config</span></code></a><a class="headerlink" href="#using-astropy-config" title="Permalink to this headline">¶</a></h2>
<div class="section" id="accessing-values">
<h3>Accessing Values<a class="headerlink" href="#accessing-values" title="Permalink to this headline">¶</a></h3>
<p>By convention, configuration parameters live inside of objects called
<code class="docutils literal"><span class="pre">conf</span></code> at the root of each subpackage.  For example, configuration
parameters related to data files live in <code class="docutils literal"><span class="pre">astropy.utils.data.conf</span></code>.
This object has properties for getting and setting individual
configuration parameters.  For instance to get the default URL for
astropy remote data do:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.utils.data</span> <span class="k">import</span> <span class="n">conf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">dataurl</span>
<span class="go">&#39;http://data.astropy.org/&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-values-at-run-time">
<h3>Changing Values at Run-time<a class="headerlink" href="#changing-values-at-run-time" title="Permalink to this headline">¶</a></h3>
<p>Changing configuration values persistently is done by editing the
configuration file as described above.  Values can also, however, be
modified in an active python session by setting any of the properties
on a <code class="docutils literal"><span class="pre">conf</span></code> object.</p>
<p>For example, if there is a part of your configuration file that looks
like:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[utils.data]</span>

<span class="c1"># URL for astropy remote data site.</span>
<span class="na">dataurl</span> <span class="o">=</span> <span class="s">http://data.astropy.org/</span>

<span class="c1"># Time to wait for remote data query (in seconds).</span>
<span class="na">remote_timeout</span> <span class="o">=</span> <span class="s">3.0</span>
</pre></div>
</div>
<p>You should be able to modify the values at run-time this way:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.utils.data</span> <span class="k">import</span> <span class="n">conf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">dataurl</span>
<span class="go">&#39;http://data.astropy.org/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">dataurl</span> <span class="o">=</span> <span class="s">&#39;http://astropydata.mywebsite.com&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">dataurl</span>
<span class="go">&#39;http://astropydata.mywebsite.com&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">remote_timeout</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">remote_timeout</span> <span class="o">=</span> <span class="mf">4.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">remote_timeout</span>
<span class="go">4.5</span>
</pre></div>
</div>
</div>
<div class="section" id="reloading-configuration">
<h3>Reloading Configuration<a class="headerlink" href="#reloading-configuration" title="Permalink to this headline">¶</a></h3>
<p>Instead of modifying the variables in python, you can also modify the
configuration files and then reload them.  For example, if you modify the
configuration file to say:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[utils.data]</span>

<span class="c1"># URL for astropy remote data site.</span>
<span class="na">dataurl</span> <span class="o">=</span> <span class="s">http://myotherdata.mywebsite.com/</span>

<span class="c1"># Time to wait for remote data query (in seconds).</span>
<span class="na">remote_timeout</span> <span class="o">=</span> <span class="s">6.3</span>
</pre></div>
</div>
<p>And then run the following commands:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="s">&#39;dataurl&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="s">&#39;remote_timeout&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This should update the variables with the values from the configuration file:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">dataurl</span>
<span class="go">&#39;http://myotherdata.mywebsite.com/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">remote_timeout</span>
<span class="go">6.3</span>
</pre></div>
</div>
<p>You can reload all configuration parameters of a <code class="docutils literal"><span class="pre">conf</span></code> object at
once by calling <code class="docutils literal"><span class="pre">reload</span></code> with no parameters:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
</pre></div>
</div>
<p>Or if you want to reload all astropy configuration at once, use the
<a class="reference internal" href="../api/astropy.config.reload_config.html#astropy.config.reload_config" title="astropy.config.reload_config"><code class="xref py py-obj docutils literal"><span class="pre">reload_config</span></code></a> function:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">reload_config</span><span class="p">(</span><span class="s">&#39;astropy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also reset a configuration parameter back to its default value.  Note that this is the default value defined in the Python code, and has nothing to do with the configuration file on disk:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="s">&#39;dataurl&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">dataurl</span>
<span class="go">&#39;http://data.astropy.org/&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="upgrading-astropy">
<h3>Upgrading astropy<a class="headerlink" href="#upgrading-astropy" title="Permalink to this headline">¶</a></h3>
<p>Each time you upgrade to a new major version of astropy, the
configuration parameters may have changed.</p>
<p>If you never edited your configuration file, there is nothing for you
to do.  It will automatically be replaced with a configuration file
template for the newly installed version of astropy.</p>
<p>If you did customize your configuration file, it will not be touched.
Instead, a new configuration file template will be installed alongside
it with the version number in the filename, for example
<code class="docutils literal"><span class="pre">astropy.0.4.cfg</span></code>.  You can compare this file to your
<code class="docutils literal"><span class="pre">astropy.cfg</span></code> file to see what needs to be changed or updated.</p>
</div>
</div>
<div class="section" id="adding-new-configuration-items">
<span id="config-developer"></span><h2>Adding new configuration items<a class="headerlink" href="#adding-new-configuration-items" title="Permalink to this headline">¶</a></h2>
<p>Configuration items should be used wherever an option or setting is
needed that is either tied to a system configuration or should persist
across sessions of astropy or an affiliated package.  Options that may
affect the results of science calculations should not be configuration
items, but should instead be <a class="reference internal" href="../api/astropy.utils.state.ScienceState.html#astropy.utils.state.ScienceState" title="astropy.utils.state.ScienceState"><code class="xref py py-obj docutils literal"><span class="pre">astropy.utils.state.ScienceState</span></code></a>, so
it&#8217;s possible to reproduce science results without them being affected
by configuration parameters set in a particular environment.
Admittedly, this is only a guideline, as the precise cases where a
configuration item is preferred over, say, a keyword option for a
function is somewhat personal preference. It is the preferred form of
persistent configuration, however, and astropy packages must all use
it (and it is recommended for affiliated packages).</p>
<p>The reference guide below describes the interface for creating a
<code class="docutils literal"><span class="pre">conf</span></code> object with a number of configuration parameters.  They
should be defined at the top level, i.e. in the <code class="docutils literal"><span class="pre">__init__.py</span></code> of
each subpackage that has configuration items:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot; This is the docstring at the beginning of a module</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">astropy</span> <span class="k">import</span> <span class="n">config</span> <span class="k">as</span> <span class="n">_config</span>

<span class="k">class</span> <span class="nc">Conf</span><span class="p">(</span><span class="n">_config</span><span class="o">.</span><span class="n">ConfigNamespace</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configuration parameters for my subpackage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">some_setting</span> <span class="o">=</span> <span class="n">_config</span><span class="o">.</span><span class="n">ConfigItem</span><span class="p">(</span>
        <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Description of some_setting&#39;</span><span class="p">)</span>
    <span class="n">another_setting</span> <span class="o">=</span> <span class="n">_config</span><span class="o">.</span><span class="n">ConfigItem</span><span class="p">(</span>
        <span class="s">&#39;string value&#39;</span><span class="p">,</span> <span class="s">&#39;Description of another_setting&#39;</span><span class="p">)</span>
<span class="c"># Create an instance for the user</span>
<span class="n">conf</span> <span class="o">=</span> <span class="n">Conf</span><span class="p">()</span>

<span class="o">...</span> <span class="n">implementation</span> <span class="o">...</span>
<span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
    <span class="c">#to get the value of these options, I might do:</span>
    <span class="n">something</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">some_setting</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">conf</span><span class="o">.</span><span class="n">another_setting</span> <span class="o">+</span> <span class="s">&#39; Also, I added text.&#39;</span>
</pre></div>
</div>
<p>The configuration items also need to be added to the config file
template.  For astropy, this file is in <code class="docutils literal"><span class="pre">astropy/astropy.cfg</span></code>.  For
an affiliated package called, for example, <code class="docutils literal"><span class="pre">packagename</span></code>, the file
is in <code class="docutils literal"><span class="pre">packagename/packagename.cfg</span></code>.  For the example above, the
following content would be added to the config file template:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[subpackage]</span>
<span class="c1">## Description of some_setting</span>
<span class="c1"># some_setting = 1</span>

<span class="c1">## Description of another_setting</span>
<span class="c1"># another_setting = foo</span>
</pre></div>
</div>
<p>Note that the key/value pairs are commented out.  This will allow for
changing the default values in a future version of astropy without
requiring the user to edit their configuration file to take advantage
of the new defaults.  By convention, the descriptions of each
parameter are in comment lines starting with two hash characters
(<code class="docutils literal"><span class="pre">##</span></code>) to distinguish them from commented out key/value pairs.</p>
<div class="section" id="item-types-and-validation">
<h3>Item Types and Validation<a class="headerlink" href="#item-types-and-validation" title="Permalink to this headline">¶</a></h3>
<p>If not otherwise specified, a <a class="reference internal" href="../api/astropy.config.ConfigItem.html#astropy.config.ConfigItem" title="astropy.config.ConfigItem"><code class="xref py py-obj docutils literal"><span class="pre">ConfigItem</span></code></a> gets its
type from the type of the <code class="docutils literal"><span class="pre">defaultvalue</span></code> it is given when it is
created.  The item can only be set to be an object of this type.
Hence:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">some_setting</span> <span class="o">=</span> <span class="n">ConfigItem</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;A description.&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">conf</span><span class="o">.</span><span class="n">some_setting</span> <span class="o">=</span> <span class="mf">1.2</span>
</pre></div>
</div>
<p>will fail, because <code class="docutils literal"><span class="pre">1.2</span></code> is a float and <code class="docutils literal"><span class="pre">1</span></code> is an int.</p>
<p>Note that if you want the configuration item to be limited to a
particular set of options, you should pass in a list as the
<code class="docutils literal"><span class="pre">defaultvalue</span></code> option.  The first entry in the list will be taken as
the default, and the list as a whole gives all the valid options.  For
example:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">an_option</span> <span class="o">=</span> <span class="n">ConfigItem</span><span class="p">(</span>
    <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">],</span>
    <span class="s">&quot;This option can be &#39;a&#39;, &#39;b&#39;, or &#39;c&#39;&quot;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">conf</span><span class="o">.</span><span class="n">an_option</span> <span class="o">=</span> <span class="s">&#39;b&#39;</span>  <span class="c"># succeeds</span>
<span class="n">conf</span><span class="o">.</span><span class="n">an_option</span> <span class="o">=</span> <span class="s">&#39;c&#39;</span>  <span class="c"># succeeds</span>
<span class="n">conf</span><span class="o">.</span><span class="n">an_option</span> <span class="o">=</span> <span class="s">&#39;d&#39;</span>  <span class="c"># fails!</span>
<span class="n">conf</span><span class="o">.</span><span class="n">an_option</span> <span class="o">=</span> <span class="mi">6</span>    <span class="c"># fails!</span>
</pre></div>
</div>
<p>Finally, a <a class="reference internal" href="../api/astropy.config.ConfigItem.html#astropy.config.ConfigItem" title="astropy.config.ConfigItem"><code class="xref py py-obj docutils literal"><span class="pre">ConfigItem</span></code></a> can be explicitly given a type
via the <code class="docutils literal"><span class="pre">cfgtype</span></code> option:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">an_int_setting</span> <span class="o">=</span> <span class="n">ConfigItem</span><span class="p">(</span>
    <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;A description.&#39;</span><span class="p">,</span> <span class="n">cfgtype</span><span class="o">=</span><span class="s">&#39;integer&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">conf</span><span class="o">.</span><span class="n">an_int_setting</span> <span class="o">=</span> <span class="mi">3</span>     <span class="c"># works fine</span>
<span class="n">conf</span><span class="o">.</span><span class="n">an_int_setting</span> <span class="o">=</span> <span class="mf">4.2</span>   <span class="c"># fails!</span>
</pre></div>
</div>
<p>If the default value&#8217;s type doesn&#8217;t match <code class="docutils literal"><span class="pre">cfgtype</span></code>, the
<a class="reference internal" href="../api/astropy.config.ConfigItem.html#astropy.config.ConfigItem" title="astropy.config.ConfigItem"><code class="xref py py-obj docutils literal"><span class="pre">ConfigItem</span></code></a> cannot be created:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">an_int_setting</span> <span class="o">=</span> <span class="n">ConfigItem</span><span class="p">(</span>
    <span class="mf">4.2</span><span class="p">,</span> <span class="s">&#39;A description.&#39;</span><span class="p">,</span> <span class="n">cfgtype</span><span class="o">=</span><span class="s">&#39;integer&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In summary, the default behavior (of automatically determining <code class="docutils literal"><span class="pre">cfgtype</span></code>)
is usually what you want.  The main exception is when you want your
configuration item to be a list.  The default behavior will treat that
as a list of <em>options</em> unless you explicitly tell it that the
<a class="reference internal" href="../api/astropy.config.ConfigItem.html#astropy.config.ConfigItem" title="astropy.config.ConfigItem"><code class="xref py py-obj docutils literal"><span class="pre">ConfigItem</span></code></a> itself is supposed to be a list:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">a_list_setting</span> <span class="o">=</span> <span class="n">ConfigItem</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s">&#39;A description.&#39;</span><span class="p">)</span>

<span class="n">a_list_setting</span> <span class="o">=</span> <span class="n">ConfigItem</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s">&#39;A description.&#39;</span><span class="p">,</span> <span class="n">cfgtype</span><span class="o">=</span><span class="s">&#39;list&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Details of all the valid <code class="docutils literal"><span class="pre">cfgtype</span></code> items can be found in the
<a class="reference external" href="http://www.voidspace.org.uk/python/validate.html#the-standard-functions">validation section of the configobj manual</a>.
Below is a list of the valid values here for quick reference:</p>
<ul class="simple">
<li>&#8216;integer&#8217;</li>
<li>&#8216;float&#8217;</li>
<li>&#8216;boolean&#8217;</li>
<li>&#8216;string&#8217;</li>
<li>&#8216;ip_addr&#8217;</li>
<li>&#8216;list&#8217;</li>
<li>&#8216;tuple&#8217;</li>
<li>&#8216;int_list&#8217;</li>
<li>&#8216;float_list&#8217;</li>
<li>&#8216;bool_list&#8217;</li>
<li>&#8216;string_list&#8217;</li>
<li>&#8216;ip_addr_list&#8217;</li>
<li>&#8216;mixed_list&#8217;</li>
<li>&#8216;option&#8217;</li>
<li>&#8216;pass&#8217;</li>
</ul>
</div>
<div class="section" id="usage-tips">
<h3>Usage Tips<a class="headerlink" href="#usage-tips" title="Permalink to this headline">¶</a></h3>
<p>Keep in mind is that <a class="reference internal" href="../api/astropy.config.ConfigItem.html#astropy.config.ConfigItem" title="astropy.config.ConfigItem"><code class="xref py py-obj docutils literal"><span class="pre">ConfigItem</span></code></a> objects can be
changed at runtime by users. So it is always recommended to read their
values immediately before use instead of just storing their initial
value to some other variable (or used as a default for a
function). For example, the following will work, but is incorrect
usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="n">conf</span><span class="o">.</span><span class="n">some_setting</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">val</span> <span class="o">+</span> <span class="mi">2</span>
</pre></div>
</div>
<p>This works fine as long as the user doesn&#8217;t change its value during
runtime, but if they do, the function won&#8217;t know about the change:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">some_func</span><span class="p">()</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">some_setting</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">some_func</span><span class="p">()</span>  <span class="c"># naively should return 5, because 3 + 2 = 5</span>
<span class="go">3</span>
</pre></div>
</div>
<p>There are two ways around this.  The typical/intended way is:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `SOME_SETTING` configuration item influences this output</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">conf</span><span class="o">.</span><span class="n">some_setting</span> <span class="o">+</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Or, if the option needs to be available as a function parameter:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If not specified, `val` is set by the `SOME_SETTING` configuration item.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">conf</span><span class="o">.</span><span class="n">some_setting</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="k">None</span> <span class="k">else</span> <span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="config_0_4_transition.html">Configuration transition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="config_0_4_transition.html#for-users">For users</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_0_4_transition.html#for-affiliated-package-authors">For affiliated package authors</a></li>
</ul>
</li>
</ul>
</div>
<p><a class="reference internal" href="../logging.html"><span class="doc">Logging system</span></a> (overview of <a class="reference internal" href="../logging.html#module-astropy.logger" title="astropy.logger"><code class="xref py py-obj docutils literal"><span class="pre">astropy.logger</span></code></a>)</p>
</div>
<div class="section" id="reference-api">
<h2>Reference/API<a class="headerlink" href="#reference-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-astropy.config">
<span id="astropy-config-package"></span><h3>astropy.config Package<a class="headerlink" href="#module-astropy.config" title="Permalink to this headline">¶</a></h3>
<p>This module contains configuration and setup utilities for the
Astropy project. This includes all functionality related to the
affiliated package index.</p>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="../api/astropy.config.get_cache_dir.html#astropy.config.get_cache_dir" title="astropy.config.get_cache_dir"><code class="xref py py-obj docutils literal"><span class="pre">get_cache_dir</span></code></a>()</td>
<td>Determines the Astropy cache directory name and creates the directory if it doesn&#8217;t exist.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/astropy.config.get_config.html#astropy.config.get_config" title="astropy.config.get_config"><code class="xref py py-obj docutils literal"><span class="pre">get_config</span></code></a>([packageormod,&nbsp;reload])</td>
<td>Gets the configuration object or section associated with a particular package or module.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/astropy.config.get_config_dir.html#astropy.config.get_config_dir" title="astropy.config.get_config_dir"><code class="xref py py-obj docutils literal"><span class="pre">get_config_dir</span></code></a>([create])</td>
<td>Determines the Astropy configuration directory name and creates the directory if it doesn&#8217;t exist.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/astropy.config.reload_config.html#astropy.config.reload_config" title="astropy.config.reload_config"><code class="xref py py-obj docutils literal"><span class="pre">reload_config</span></code></a>([packageormod])</td>
<td>Reloads configuration settings from a configuration file for the root package of the requested package/module.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="classes">
<h4>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h4>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="../api/astropy.config.ConfigItem.html#astropy.config.ConfigItem" title="astropy.config.ConfigItem"><code class="xref py py-obj docutils literal"><span class="pre">ConfigItem</span></code></a>([defaultvalue,&nbsp;description,&nbsp;...])</td>
<td>A setting and associated value stored in a configuration file.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/astropy.config.ConfigNamespace.html#astropy.config.ConfigNamespace" title="astropy.config.ConfigNamespace"><code class="xref py py-obj docutils literal"><span class="pre">ConfigNamespace</span></code></a></td>
<td>A namespace of configuration items.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/astropy.config.ConfigurationMissingWarning.html#astropy.config.ConfigurationMissingWarning" title="astropy.config.ConfigurationMissingWarning"><code class="xref py py-obj docutils literal"><span class="pre">ConfigurationMissingWarning</span></code></a></td>
<td>A Warning that is issued when the configuration directory cannot be accessed (usually due to a permissions problem).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/astropy.config.InvalidConfigurationItemWarning.html#astropy.config.InvalidConfigurationItemWarning" title="astropy.config.InvalidConfigurationItemWarning"><code class="xref py py-obj docutils literal"><span class="pre">InvalidConfigurationItemWarning</span></code></a></td>
<td>A Warning that is issued when the configuration value specified in the astropy configuration file does not match the type expected for that configuration value.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/astropy.config.set_temp_cache.html#astropy.config.set_temp_cache" title="astropy.config.set_temp_cache"><code class="xref py py-obj docutils literal"><span class="pre">set_temp_cache</span></code></a>([path,&nbsp;delete])</td>
<td>Context manager to set a temporary path for the Astropy download cache, primarily for use with testing (though there may be other applications for setting a different cache directory, for example to switch to a cache dedicated to large files).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/astropy.config.set_temp_config.html#astropy.config.set_temp_config" title="astropy.config.set_temp_config"><code class="xref py py-obj docutils literal"><span class="pre">set_temp_config</span></code></a>([path,&nbsp;delete])</td>
<td>Context manager to set a temporary path for the Astropy config, primarily for use with testing.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="class-inheritance-diagram">
<h4>Class Inheritance Diagram<a class="headerlink" href="#class-inheritance-diagram" title="Permalink to this headline">¶</a></h4>
<object data="../_images/inheritance-c999484a8d031b46b941987fd134e4c74a786346.svg" type="image/svg+xml">
            <p class="warning">Inheritance diagram of astropy.config.configuration.ConfigItem, astropy.config.configuration.ConfigNamespace, astropy.config.configuration.ConfigurationMissingWarning, astropy.config.configuration.InvalidConfigurationItemWarning, astropy.config.paths.set_temp_cache, astropy.config.paths.set_temp_config</p></object>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Configuration system (<code class="docutils literal"><span class="pre">astropy.config</span></code>)</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#using-astropy-config">Using <code class="docutils literal"><span class="pre">astropy.config</span></code></a><ul>
<li><a class="reference internal" href="#accessing-values">Accessing Values</a></li>
<li><a class="reference internal" href="#changing-values-at-run-time">Changing Values at Run-time</a></li>
<li><a class="reference internal" href="#reloading-configuration">Reloading Configuration</a></li>
<li><a class="reference internal" href="#upgrading-astropy">Upgrading astropy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-new-configuration-items">Adding new configuration items</a><ul>
<li><a class="reference internal" href="#item-types-and-validation">Item Types and Validation</a></li>
<li><a class="reference internal" href="#usage-tips">Usage Tips</a></li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
<li><a class="reference internal" href="#reference-api">Reference/API</a><ul>
<li><a class="reference internal" href="#module-astropy.config">astropy.config Package</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="http://github.com/astropy/astropy/tree/master/docs/config/index.rst">Edit This Page on Github</a> &nbsp;
    <a href="../_sources/config/index.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011-2016, The Astropy Developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.1. &nbsp;
    Last built 29 Apr 2016. <br/>
  </p>
</footer>
  </body>
</html>