<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Known Issues &mdash; Astropy v1.2.dev14978</title>
    
    <link rel="stylesheet" href="_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2.dev14978',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="shortcut icon" href="_static/astropy_logo.ico"/>
    <link rel="top" title="Astropy v1.2.dev14978" href="index.html" />
    <link rel="next" title="Authors and Credits" href="credits.html" />
    <link rel="prev" title="What’s New in Astropy 0.1" href="whatsnew/0.1.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>
<script type="text/javascript" src="_static/copybutton.js"></script>


  </head>
  <body role="document">
<div class="topbar">
  <a class="brand" title="Documentation Home" href="index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="genindex.html">Index</a></li>
    <li><a title="Module Index" href="py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="credits.html" title="Authors and Credits">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="whatsnew/0.1.html" title="What’s New in Astropy 0.1">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="index.html">Astropy v1.2.dev14978</a>
	 &raquo;
      </li>
      
      <li>Known Issues</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="known-issues">
<h1>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#known-deficiencies" id="id5">Known deficiencies</a><ul>
<li><a class="reference internal" href="#quantities-lose-their-units-with-some-operations" id="id6">Quantities lose their units with some operations</a></li>
<li><a class="reference internal" href="#quantities-float-comparison-with-np-isclose-fails" id="id7">Quantities float comparison with np.isclose fails</a></li>
<li><a class="reference internal" href="#quantities-in-np-linspace-failure-on-numpy-1-10" id="id8">Quantities in np.linspace failure on numpy 1.10</a></li>
<li><a class="reference internal" href="#table-sorting-can-silently-fail-on-macos-x-or-windows-with-python-3-and-numpy-1-6-2" id="id9">Table sorting can silently fail on MacOS X or Windows with Python 3 and Numpy &lt; 1.6.2</a></li>
<li><a class="reference internal" href="#remote-data-utilities-in-astropy-utils-data-fail-on-some-python-distributions" id="id10">Remote data utilities in <a class="reference internal" href="utils/index.html#module-astropy.utils.data" title="astropy.utils.data"><code class="xref py py-obj docutils literal"><span class="pre">astropy.utils.data</span></code></a> fail on some Python distributions</a></li>
<li><a class="reference internal" href="#mmap-support-for-astropy-io-fits-on-gnu-hurd" id="id11">mmap support for <code class="docutils literal"><span class="pre">astropy.io.fits</span></code> on GNU Hurd</a></li>
<li><a class="reference internal" href="#bug-with-unicode-endianness-in-io-fits-for-big-endian-processors" id="id12">Bug with unicode endianness in <code class="docutils literal"><span class="pre">io.fits</span></code> for big-endian processors</a></li>
<li><a class="reference internal" href="#error-buffer-does-not-have-the-buffer-interface-in-io-fits" id="id13">Error <em>&#8216;buffer&#8217; does not have the buffer interface</em> in <code class="docutils literal"><span class="pre">io.fits</span></code></a></li>
<li><a class="reference internal" href="#floating-point-precision-issues-on-python-2-6-on-microsoft-windows" id="id14">Floating point precision issues on Python 2.6 on Microsoft Windows</a></li>
<li><a class="reference internal" href="#color-printing-on-windows" id="id15">Color printing on Windows</a></li>
<li><a class="reference internal" href="#pickling-error-on-compound-models" id="id16">Pickling error on compound models</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-installation-test-issues" id="id17">Build/installation/test issues</a><ul>
<li><a class="reference internal" href="#anaconda-users-should-upgrade-with-conda-not-pip" id="id18">Anaconda users should upgrade with <code class="docutils literal"><span class="pre">conda</span></code>, not <code class="docutils literal"><span class="pre">pip</span></code></a></li>
<li><a class="reference internal" href="#locale-errors-in-macos-x-and-linux" id="id19">Locale errors in MacOS X and Linux</a></li>
<li><a class="reference internal" href="#creating-a-time-object-fails-with-valueerror-after-upgrading-astropy" id="id20">Creating a Time object fails with ValueError after upgrading Astropy</a></li>
<li><a class="reference internal" href="#failing-logging-tests-when-running-the-tests-in-ipython" id="id21">Failing logging tests when running the tests in IPython</a></li>
<li><a class="reference internal" href="#some-docstrings-can-not-be-displayed-in-ipython-0-13-2" id="id22">Some docstrings can not be displayed in IPython &lt; 0.13.2</a></li>
<li><a class="reference internal" href="#installation-fails-on-mageia-2-or-mageia-3-distributions" id="id23">Installation fails on Mageia-2 or Mageia-3 distributions</a></li>
<li><a class="reference internal" href="#crash-on-upgrading-from-astropy-0-2-to-a-newer-version" id="id24">Crash on upgrading from Astropy 0.2 to a newer version</a></li>
</ul>
</li>
</ul>
</div>
<p>While most bugs and issues are managed using the <a class="reference external" href="https://github.com/astropy/astropy/issues">astropy issue
tracker</a>, this document
lists issues that are too difficult to fix, may require some
intervention from the user to workaround, or are due to bugs in other
projects or packages.</p>
<p>Issues listed on this page are grouped into two categories:  The first is known
issues and shortcomings in actual algorithms and interfaces that currently do
not have fixes or workarounds, and that users should be aware of when writing
code that uses Astropy.  Some of those issues are still platform-specific,
while others are very general.  The second category is common issues that come
up when configuring, building, or installing Astropy.  This also includes
cases where the test suite can report false negatives depending on the context/
platform on which it was run.</p>
<div class="section" id="known-deficiencies">
<h2><a class="toc-backref" href="#id5">Known deficiencies</a><a class="headerlink" href="#known-deficiencies" title="Permalink to this headline">¶</a></h2>
<div class="section" id="quantities-lose-their-units-with-some-operations">
<span id="quantity-issues"></span><h3><a class="toc-backref" href="#id6">Quantities lose their units with some operations</a><a class="headerlink" href="#quantities-lose-their-units-with-some-operations" title="Permalink to this headline">¶</a></h3>
<p>Quantities are subclassed from numpy&#8217;s <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">ndarray</span></code></a> and in some numpy operations
(and in scipy operations using numpy internally) the subclass is ignored, which
means that either a plain array is returned, or a <a class="reference internal" href="api/astropy.units.quantity.Quantity.html#astropy.units.quantity.Quantity" title="astropy.units.quantity.Quantity"><code class="xref py py-obj docutils literal"><span class="pre">Quantity</span></code></a> without units.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">astropy.units</span> <span class="kn">as</span> <span class="nn">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">Quantity</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">10.</span><span class="p">),</span> <span class="n">u</span><span class="o">.</span><span class="n">m</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="n">q</span><span class="p">)</span>
<span class="go">285.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">q</span><span class="p">,</span><span class="n">q</span><span class="p">))</span>
<span class="go">&lt;Quantity [ 0., 1., 2., 3., 4., 5., 6., 7., 8., 9., 0., 1., 2., 3., 4.,</span>
<span class="go">            5., 6., 7., 8., 9.] (Unit not initialised)&gt;</span>
</pre></div>
</div>
<p>Also in-place operations where the output is a normal <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">ndarray</span></code></a>
will drop the unit silently (at least in numpy &lt;= 1.9):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">10.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">*=</span> <span class="mf">1.</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">kg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9.])</span>
</pre></div>
</div>
<p>Work-arounds are available for some cases.  For the above:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="go">&lt;Quantity 285.0 m2&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">Quantity</span><span class="p">([</span><span class="n">q</span><span class="p">,</span> <span class="n">q</span><span class="p">])</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="go">&lt;Quantity [ 0., 1., 2., 3., 4., 5., 6., 7., 8., 9., 0., 1., 2., 3., 4.,</span>
<span class="go">            5., 6., 7., 8., 9.] m&gt;</span>
</pre></div>
</div>
<p>An incomplete list of specific functions which are known to exhibit this behavior follows.</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html#numpy.dot" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">numpy.dot</span></code></a></li>
<li><a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html#numpy.hstack" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">numpy.hstack</span></code></a>, <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.vstack.html#numpy.vstack" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">numpy.vstack</span></code></a>, <code class="docutils literal"><span class="pre">numpy.c_</span></code>, <code class="docutils literal"><span class="pre">numpy.r_</span></code>, <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.append.html#numpy.append" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">numpy.append</span></code></a></li>
<li><a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html#numpy.where" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">numpy.where</span></code></a></li>
<li><a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.choose.html#numpy.choose" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">numpy.choose</span></code></a></li>
<li><a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html#numpy.vectorize" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">numpy.vectorize</span></code></a></li>
<li>pandas DataFrame(s)</li>
</ul>
<p>See: <a class="reference external" href="https://github.com/astropy/astropy/issues/1274">https://github.com/astropy/astropy/issues/1274</a></p>
</div>
<div class="section" id="quantities-float-comparison-with-np-isclose-fails">
<h3><a class="toc-backref" href="#id7">Quantities float comparison with np.isclose fails</a><a class="headerlink" href="#quantities-float-comparison-with-np-isclose-fails" title="Permalink to this headline">¶</a></h3>
<p>Comparing Quantities floats using the numpy function <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.isclose.html#numpy.isclose" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">isclose</span></code></a> fails on
numpy 1.9 as the comparison between <code class="docutils literal"><span class="pre">a</span></code> and <code class="docutils literal"><span class="pre">b</span></code> is made using the formula</p>
<div class="math">
<p><img src="_images/math/e33c399c9eacb29006baec6083328b6e610fb744.png" alt="|a - b| \le (a_\textrm{tol} + r_\textrm{tol} \times |b|)"/></p>
</div><p>This will result in the following traceback when using this with Quantities:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span><span class="p">,</span> <span class="n">constants</span> <span class="k">as</span> <span class="n">const</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="mi">500</span><span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">km</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">,</span> <span class="mi">300</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">km</span> <span class="o">/</span> <span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="go">UnitsError: Can only apply &#39;add&#39; function to dimensionless quantities when</span>
<span class="go">other argument is not a quantity (unless the latter is all zero/infinity/nan)</span>
</pre></div>
</div>
<p>An easy solution is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="mi">500</span><span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">km</span><span class="o">/</span><span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">,</span> <span class="mi">300</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">km</span> <span class="o">/</span> <span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-8</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">mm</span> <span class="o">/</span> <span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="go">array([False], dtype=bool)</span>
</pre></div>
</div>
</div>
<div class="section" id="quantities-in-np-linspace-failure-on-numpy-1-10">
<h3><a class="toc-backref" href="#id8">Quantities in np.linspace failure on numpy 1.10</a><a class="headerlink" href="#quantities-in-np-linspace-failure-on-numpy-1-10" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html#numpy.linspace" title="(in NumPy v1.10)"><code class="xref py py-obj docutils literal"><span class="pre">linspace</span></code></a> does not work correctly with quantities when using numpy
1.10.0 to 1.10.5 due to a bug in numpy. The solution is to upgrade to numpy
1.10.6 or later, in which the bug was fixed.</p>
</div>
<div class="section" id="table-sorting-can-silently-fail-on-macos-x-or-windows-with-python-3-and-numpy-1-6-2">
<h3><a class="toc-backref" href="#id9">Table sorting can silently fail on MacOS X or Windows with Python 3 and Numpy &lt; 1.6.2</a><a class="headerlink" href="#table-sorting-can-silently-fail-on-macos-x-or-windows-with-python-3-and-numpy-1-6-2" title="Permalink to this headline">¶</a></h3>
<p>In Python 3, prior to Numpy 1.6.2, there was a bug (in Numpy) that caused
sorting of structured arrays to silently fail under certain circumstances (for
example if the Table contains string columns) on MacOS X, Windows, and possibly
other platforms other than Linux.  Since <code class="docutils literal"><span class="pre">Table.sort</span></code> relies on Numpy to
internally sort the data, it is also affected by this bug.  If you are using
Python 3, and need the sorting functionality for tables, we recommend updating
to a more recent version of Numpy.</p>
</div>
<div class="section" id="remote-data-utilities-in-astropy-utils-data-fail-on-some-python-distributions">
<h3><a class="toc-backref" href="#id10">Remote data utilities in <a class="reference internal" href="utils/index.html#module-astropy.utils.data" title="astropy.utils.data"><code class="xref py py-obj docutils literal"><span class="pre">astropy.utils.data</span></code></a> fail on some Python distributions</a><a class="headerlink" href="#remote-data-utilities-in-astropy-utils-data-fail-on-some-python-distributions" title="Permalink to this headline">¶</a></h3>
<p>The remote data utilities in <a class="reference internal" href="utils/index.html#module-astropy.utils.data" title="astropy.utils.data"><code class="xref py py-obj docutils literal"><span class="pre">astropy.utils.data</span></code></a> depend on the Python
standard library <a class="reference external" href="http://docs.python.org/library/shelve.html#module-shelve" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">shelve</span></code></a> module, which in some cases depends on the
standard library <a class="reference external" href="http://docs.python.org/library/bsddb.html#module-bsddb" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">bsddb</span></code></a> module. Some Python distributions, including but
not limited to</p>
<ul class="simple">
<li>OS X, Python 2.7.5 via homebrew</li>
<li>Linux, Python 2.7.6 via conda <a class="footnote-reference" href="#id3" id="id1">[1]</a></li>
<li>Linux, Python 2.6.9 via conda</li>
</ul>
<p>are built without support for the <code class="docutils literal"><span class="pre">bsddb</span></code> module, resulting in an error
such as:</p>
<div class="highlight-python"><div class="highlight"><pre>ImportError: No module named _bsddb
</pre></div>
</div>
<p>One workaround is to install the <code class="docutils literal"><span class="pre">bsddb3</span></code> module.</p>
</div>
<div class="section" id="mmap-support-for-astropy-io-fits-on-gnu-hurd">
<h3><a class="toc-backref" href="#id11">mmap support for <code class="docutils literal"><span class="pre">astropy.io.fits</span></code> on GNU Hurd</a><a class="headerlink" href="#mmap-support-for-astropy-io-fits-on-gnu-hurd" title="Permalink to this headline">¶</a></h3>
<p>On Hurd and possibly other platforms <code class="docutils literal"><span class="pre">flush()</span></code> on memory-mapped files is not
implemented, so writing changes to a mmap&#8217;d FITS file may not be reliable and is
thus disabled.  Attempting to open a FITS file in writeable mode with mmap will
result in a warning (and mmap will be disabled on the file automatically).</p>
<p>See: <a class="reference external" href="https://github.com/astropy/astropy/issues/968">https://github.com/astropy/astropy/issues/968</a></p>
</div>
<div class="section" id="bug-with-unicode-endianness-in-io-fits-for-big-endian-processors">
<h3><a class="toc-backref" href="#id12">Bug with unicode endianness in <code class="docutils literal"><span class="pre">io.fits</span></code> for big-endian processors</a><a class="headerlink" href="#bug-with-unicode-endianness-in-io-fits-for-big-endian-processors" title="Permalink to this headline">¶</a></h3>
<p>On big-endian processors (e.g. SPARC, PowerPC, MIPS), string columns in FITS
files may not be correctly read when using the <code class="docutils literal"><span class="pre">Table.read</span></code> interface. This
will be fixed in a subsequent bug fix release of Astropy (see <a class="reference external" href="https://github.com/astropy/astropy/issues/3415">bug report here</a>)</p>
</div>
<div class="section" id="error-buffer-does-not-have-the-buffer-interface-in-io-fits">
<h3><a class="toc-backref" href="#id13">Error <em>&#8216;buffer&#8217; does not have the buffer interface</em> in <code class="docutils literal"><span class="pre">io.fits</span></code></a><a class="headerlink" href="#error-buffer-does-not-have-the-buffer-interface-in-io-fits" title="Permalink to this headline">¶</a></h3>
<p>For Python 2.7.x versions prior to 2.7.4, the <a class="reference internal" href="io/fits/index.html#module-astropy.io.fits" title="astropy.io.fits"><code class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits</span></code></a> may under
certain circumstances output the following error:</p>
<div class="highlight-python"><div class="highlight"><pre>TypeError: &#39;buffer&#39; does not have the buffer interface
</pre></div>
</div>
<p>This can be resolved by upgrading to Python 2.7.4 or later (at the time of
writing, the latest Python 2.7.x version is 2.7.9).</p>
</div>
<div class="section" id="floating-point-precision-issues-on-python-2-6-on-microsoft-windows">
<h3><a class="toc-backref" href="#id14">Floating point precision issues on Python 2.6 on Microsoft Windows</a><a class="headerlink" href="#floating-point-precision-issues-on-python-2-6-on-microsoft-windows" title="Permalink to this headline">¶</a></h3>
<p>When converting floating point numbers to strings on Python 2.6 on a
Microsoft Windows platform, some of the requested precision may be
lost.</p>
<p>The easiest workaround is to install Python 2.7.</p>
<p>The Python issue: <a class="reference external" href="http://bugs.python.org/issue7117">http://bugs.python.org/issue7117</a></p>
</div>
<div class="section" id="color-printing-on-windows">
<h3><a class="toc-backref" href="#id15">Color printing on Windows</a><a class="headerlink" href="#color-printing-on-windows" title="Permalink to this headline">¶</a></h3>
<p>Colored printing of log messages and other colored text does work in Windows
but only when running in the IPython console.  Colors are not currently
supported in the basic Python command-line interpreter on Windows.</p>
</div>
<div class="section" id="pickling-error-on-compound-models">
<h3><a class="toc-backref" href="#id16">Pickling error on compound models</a><a class="headerlink" href="#pickling-error-on-compound-models" title="Permalink to this headline">¶</a></h3>
<p>When calling <a class="reference external" href="http://docs.python.org/library/pickle.html#pickle.dumps" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">pickle.dumps</span></code></a> on a <a class="reference internal" href="modeling/compound-models.html#compound-models"><span>compound model</span></a>, it
is possible to get an exception with a <a class="reference external" href="http://docs.python.org/library/pickle.html#pickle.PickleError" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">pickle.PickleError</span></code></a> or, depending on
the Python version or whether the <a class="reference external" href="http://docs.python.org/library/pickle.html#module-cPickle" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">cPickle</span></code></a> module was being used, an
<code class="xref py py-obj docutils literal"><span class="pre">AttributeError</span></code> like:</p>
<div class="highlight-python"><div class="highlight"><pre>AttributeError: &#39;module&#39; object has no attribute &#39;CompoundModel0&#39;
</pre></div>
</div>
<p>as originally reported in issue
<a class="reference external" href="https://github.com/astropy/astropy/pull/3867">#3867</a>.  You may also get a
<code class="xref py py-obj docutils literal"><span class="pre">RuntimeError</span></code> that directed you to this documentation.</p>
<p>This is due to a bug in Python versions older than 2.7.3 (see
<a class="reference external" href="http://bugs.python.org/issue7689">http://bugs.python.org/issue7689</a>) that is very difficult to work around when
trying to pickle compound models.  If the need is dire it may be possible
to work around by using a patched copy of the <a class="reference external" href="http://docs.python.org/library/pickle.html#module-pickle" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">pickle</span></code></a> module (i.e.
backporting a copy of the Python <a class="reference external" href="http://docs.python.org/library/pickle.html#module-pickle" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">pickle</span></code></a> module from newer Python versions
and using it instead of the copy built-in to your Python).</p>
</div>
</div>
<div class="section" id="build-installation-test-issues">
<h2><a class="toc-backref" href="#id17">Build/installation/test issues</a><a class="headerlink" href="#build-installation-test-issues" title="Permalink to this headline">¶</a></h2>
<div class="section" id="anaconda-users-should-upgrade-with-conda-not-pip">
<h3><a class="toc-backref" href="#id18">Anaconda users should upgrade with <code class="docutils literal"><span class="pre">conda</span></code>, not <code class="docutils literal"><span class="pre">pip</span></code></a><a class="headerlink" href="#anaconda-users-should-upgrade-with-conda-not-pip" title="Permalink to this headline">¶</a></h3>
<p>Upgrading Astropy in the anaconda python distribution using <code class="docutils literal"><span class="pre">pip</span></code> can result
in a corrupted install with a mix of files from the old version and the new
version. Anaconda users should update with <code class="docutils literal"><span class="pre">conda</span> <span class="pre">update</span> <span class="pre">astropy</span></code>. There
may be a brief delay between the release of Astropy on PyPI and its release
via the <code class="docutils literal"><span class="pre">conda</span></code> package manager; users can check the availability of new
versions with <code class="docutils literal"><span class="pre">conda</span> <span class="pre">search</span> <span class="pre">astropy</span></code>.</p>
</div>
<div class="section" id="locale-errors-in-macos-x-and-linux">
<h3><a class="toc-backref" href="#id19">Locale errors in MacOS X and Linux</a><a class="headerlink" href="#locale-errors-in-macos-x-and-linux" title="Permalink to this headline">¶</a></h3>
<p>On MacOS X, you may see the following error when running <code class="docutils literal"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>  ...
ValueError: unknown locale: UTF-8
</pre></div>
</div>
<p>This is due to the <code class="docutils literal"><span class="pre">LC_CTYPE</span></code> environment variable being incorrectly set to
<code class="docutils literal"><span class="pre">UTF-8</span></code> by default, which is not a valid locale setting.</p>
<p>On MacOS X or Linux (or other platforms) you may also encounter the following
error:</p>
<div class="highlight-python"><div class="highlight"><pre>  ...
  stderr = stderr.decode(stdio_encoding)
TypeError: decode() argument 1 must be str, not None
</pre></div>
</div>
<p>This also indicates that your locale is not set correctly.</p>
<p>To fix either of these issues, set this environment variable, as well as the
<code class="docutils literal"><span class="pre">LANG</span></code> and <code class="docutils literal"><span class="pre">LC_ALL</span></code> environment variables to e.g. <code class="docutils literal"><span class="pre">en_US.UTF-8</span></code> using, in
the case of <code class="docutils literal"><span class="pre">bash</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>export LANG=&quot;en_US.UTF-8&quot;
export LC_ALL=&quot;en_US.UTF-8&quot;
export LC_CTYPE=&quot;en_US.UTF-8&quot;
</pre></div>
</div>
<p>To avoid any issues in future, you should add this line to your e.g.
<code class="docutils literal"><span class="pre">~/.bash_profile</span></code> or <code class="docutils literal"><span class="pre">.bashrc</span></code> file.</p>
<p>To test these changes, open a new terminal and type <code class="docutils literal"><span class="pre">locale</span></code>, and you should
see something like:</p>
<div class="highlight-python"><div class="highlight"><pre>$ locale
LANG=&quot;en_US.UTF-8&quot;
LC_COLLATE=&quot;en_US.UTF-8&quot;
LC_CTYPE=&quot;en_US.UTF-8&quot;
LC_MESSAGES=&quot;en_US.UTF-8&quot;
LC_MONETARY=&quot;en_US.UTF-8&quot;
LC_NUMERIC=&quot;en_US.UTF-8&quot;
LC_TIME=&quot;en_US.UTF-8&quot;
LC_ALL=&quot;en_US.UTF-8&quot;
</pre></div>
</div>
<p>If so, you can go ahead and try running <code class="docutils literal"><span class="pre">setup.py</span></code> again (in the new
terminal).</p>
</div>
<div class="section" id="creating-a-time-object-fails-with-valueerror-after-upgrading-astropy">
<h3><a class="toc-backref" href="#id20">Creating a Time object fails with ValueError after upgrading Astropy</a><a class="headerlink" href="#creating-a-time-object-fails-with-valueerror-after-upgrading-astropy" title="Permalink to this headline">¶</a></h3>
<p>In some cases, have users have upgraded Astropy from an older version to v1.0
or greater they have run into the following crash when trying to create a
<a class="reference internal" href="api/astropy.time.Time.html#astropy.time.Time" title="astropy.time.Time"><code class="xref py py-obj docutils literal"><span class="pre">Time</span></code></a> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">datetime</span> <span class="o">=</span> <span class="n">Time</span><span class="p">(</span><span class="s">&#39;2012-03-01T13:08:00&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s">&#39;utc&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Input values did not match any of the formats where</span>
<span class="go">the format keyword is optional [u&#39;astropy_time&#39;, u&#39;datetime&#39;,</span>
<span class="go">u&#39;jyear_str&#39;, u&#39;iso&#39;, u&#39;isot&#39;, u&#39;yday&#39;, u&#39;byear_str&#39;]</span>
</pre></div>
</div>
<p>This problem can occur when there is a version mismatch between the compiled
ERFA library (this is included as part of Astropy in most distributions), and
the version of the Astropy Python source.</p>
<p>This can have a number of causes.  The most likely is that when installing the
new Astropy version, your previous Astropy version was not fully uninstalled
first, resulting in a mishmash of versions.  Your best bet is to fully remove
Astropy from its installation path, and reinstall from scratch using your
preferred installation method.  How to remove the old version may be a simple
matter if removing the entire <code class="docutils literal"><span class="pre">astropy/</span></code> directory from within the
<code class="docutils literal"><span class="pre">site-packages</span></code> directory it is installed in.  However, if in doubt, ask
how best to uninstall packages from your preferred Python distribution.</p>
<p>Another possible cause of this, in particular for people developing on Astropy
and installing from a source checkout, is simply that your Astropy build
directory is unclean.  To fix this, run <code class="docutils literal"><span class="pre">git</span> <span class="pre">clean</span> <span class="pre">-dfx</span></code>.  This removes
<em>all</em> build artifacts from the repository that aren&#8217;t normally tracked by git.
Make sure before running this that there are no untracked files in the
repository you intend to save.  Then rebuild/reinstall from the clean repo.</p>
</div>
<div class="section" id="failing-logging-tests-when-running-the-tests-in-ipython">
<h3><a class="toc-backref" href="#id21">Failing logging tests when running the tests in IPython</a><a class="headerlink" href="#failing-logging-tests-when-running-the-tests-in-ipython" title="Permalink to this headline">¶</a></h3>
<p>When running the Astropy tests using <code class="docutils literal"><span class="pre">astropy.test()</span></code> in an IPython
interpreter some of the tests in the <code class="docutils literal"><span class="pre">astropy/tests/test_logger.py</span></code> <em>might</em>
fail, depending on the version of IPython or other factors.
This is due to mutually incompatible behaviors in IPython and py.test, and is
not due to a problem with the test itself or the feature being tested.</p>
<p>See: <a class="reference external" href="https://github.com/astropy/astropy/issues/717">https://github.com/astropy/astropy/issues/717</a></p>
</div>
<div class="section" id="some-docstrings-can-not-be-displayed-in-ipython-0-13-2">
<h3><a class="toc-backref" href="#id22">Some docstrings can not be displayed in IPython &lt; 0.13.2</a><a class="headerlink" href="#some-docstrings-can-not-be-displayed-in-ipython-0-13-2" title="Permalink to this headline">¶</a></h3>
<p>Displaying long docstrings that contain Unicode characters may fail on
some platforms in the IPython console (prior to IPython version
0.13.2):</p>
<div class="highlight-python"><div class="highlight"><pre>In [1]: import astropy.units as u

In [2]: u.Angstrom?
Out[2]: ERROR: UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\xe5&#39; in
position 184: ordinal not in range(128) [IPython.core.page]
</pre></div>
</div>
<p>This can be worked around by changing the default encoding to <code class="docutils literal"><span class="pre">utf-8</span></code>
by adding the following to your <code class="docutils literal"><span class="pre">sitecustomize.py</span></code> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that in general, <a class="reference external" href="http://ziade.org/2008/01/08/syssetdefaultencoding-is-evil/">this is not recommended</a>,
because it can hide other Unicode encoding bugs in your application.
However, in general if your application does not deal with text
processing and you just want docstrings to work, this may be
acceptable.</p>
<p>The IPython issue: <a class="reference external" href="https://github.com/ipython/ipython/pull/2738">https://github.com/ipython/ipython/pull/2738</a></p>
</div>
<div class="section" id="installation-fails-on-mageia-2-or-mageia-3-distributions">
<h3><a class="toc-backref" href="#id23">Installation fails on Mageia-2 or Mageia-3 distributions</a><a class="headerlink" href="#installation-fails-on-mageia-2-or-mageia-3-distributions" title="Permalink to this headline">¶</a></h3>
<p>Building may fail with warning messages such as:</p>
<div class="highlight-python"><div class="highlight"><pre>unable to find &#39;pow&#39; or &#39;sincos&#39;
</pre></div>
</div>
<p>at the linking phase. Upgrading the OS packages for Python should
fix the issue, though an immediate workaround is to edit the file:</p>
<div class="highlight-python"><div class="highlight"><pre>/usr/lib/python2.7/config/Makefile
</pre></div>
</div>
<p>and search for the line that adds the option <code class="docutils literal"><span class="pre">-Wl,--no-undefined</span></code> to the
<code class="docutils literal"><span class="pre">LDFLAGS</span></code> variable and remove that option.</p>
</div>
<div class="section" id="crash-on-upgrading-from-astropy-0-2-to-a-newer-version">
<h3><a class="toc-backref" href="#id24">Crash on upgrading from Astropy 0.2 to a newer version</a><a class="headerlink" href="#crash-on-upgrading-from-astropy-0-2-to-a-newer-version" title="Permalink to this headline">¶</a></h3>
<p>It is possible for installation of a new version of Astropy, or upgrading of an
existing installation to crash due to not having permissions on the
<code class="docutils literal"><span class="pre">~/.astropy/</span></code> directory (in your home directory) or some file or subdirectory
in that directory.  In particular this can occur if you installed Astropy as
the root user (such as with <code class="docutils literal"><span class="pre">sudo</span></code>) at any point.  This can manifest in
several ways, but the most common is a traceback ending with <code class="docutils literal"><span class="pre">ImportError:</span>
<span class="pre">cannot</span> <span class="pre">import</span> <span class="pre">name</span> <span class="pre">config</span></code>.  To resolve this issue either run <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">chown</span> <span class="pre">-R</span>
<span class="pre">&lt;your_username&gt;</span> <span class="pre">~/.astropy</span></code> or, if you don&#8217;t need anything in it you can blow
it away with <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">~/.astropy</span></code>.</p>
<p>See for example: <a class="reference external" href="https://github.com/astropy/astropy/issues/987">https://github.com/astropy/astropy/issues/987</a></p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Continuum <a class="reference external" href="https://groups.google.com/a/continuum.io/forum/#!topic/anaconda/mCQL6fVx55A">says</a>
this will be fixed in their next Python build.</td></tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Known Issues</a><ul>
<li><a class="reference internal" href="#known-deficiencies">Known deficiencies</a><ul>
<li><a class="reference internal" href="#quantities-lose-their-units-with-some-operations">Quantities lose their units with some operations</a></li>
<li><a class="reference internal" href="#quantities-float-comparison-with-np-isclose-fails">Quantities float comparison with np.isclose fails</a></li>
<li><a class="reference internal" href="#quantities-in-np-linspace-failure-on-numpy-1-10">Quantities in np.linspace failure on numpy 1.10</a></li>
<li><a class="reference internal" href="#table-sorting-can-silently-fail-on-macos-x-or-windows-with-python-3-and-numpy-1-6-2">Table sorting can silently fail on MacOS X or Windows with Python 3 and Numpy &lt; 1.6.2</a></li>
<li><a class="reference internal" href="#remote-data-utilities-in-astropy-utils-data-fail-on-some-python-distributions">Remote data utilities in <code class="docutils literal"><span class="pre">astropy.utils.data</span></code> fail on some Python distributions</a></li>
<li><a class="reference internal" href="#mmap-support-for-astropy-io-fits-on-gnu-hurd">mmap support for <code class="docutils literal"><span class="pre">astropy.io.fits</span></code> on GNU Hurd</a></li>
<li><a class="reference internal" href="#bug-with-unicode-endianness-in-io-fits-for-big-endian-processors">Bug with unicode endianness in <code class="docutils literal"><span class="pre">io.fits</span></code> for big-endian processors</a></li>
<li><a class="reference internal" href="#error-buffer-does-not-have-the-buffer-interface-in-io-fits">Error <em>&#8216;buffer&#8217; does not have the buffer interface</em> in <code class="docutils literal"><span class="pre">io.fits</span></code></a></li>
<li><a class="reference internal" href="#floating-point-precision-issues-on-python-2-6-on-microsoft-windows">Floating point precision issues on Python 2.6 on Microsoft Windows</a></li>
<li><a class="reference internal" href="#color-printing-on-windows">Color printing on Windows</a></li>
<li><a class="reference internal" href="#pickling-error-on-compound-models">Pickling error on compound models</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-installation-test-issues">Build/installation/test issues</a><ul>
<li><a class="reference internal" href="#anaconda-users-should-upgrade-with-conda-not-pip">Anaconda users should upgrade with <code class="docutils literal"><span class="pre">conda</span></code>, not <code class="docutils literal"><span class="pre">pip</span></code></a></li>
<li><a class="reference internal" href="#locale-errors-in-macos-x-and-linux">Locale errors in MacOS X and Linux</a></li>
<li><a class="reference internal" href="#creating-a-time-object-fails-with-valueerror-after-upgrading-astropy">Creating a Time object fails with ValueError after upgrading Astropy</a></li>
<li><a class="reference internal" href="#failing-logging-tests-when-running-the-tests-in-ipython">Failing logging tests when running the tests in IPython</a></li>
<li><a class="reference internal" href="#some-docstrings-can-not-be-displayed-in-ipython-0-13-2">Some docstrings can not be displayed in IPython &lt; 0.13.2</a></li>
<li><a class="reference internal" href="#installation-fails-on-mageia-2-or-mageia-3-distributions">Installation fails on Mageia-2 or Mageia-3 distributions</a></li>
<li><a class="reference internal" href="#crash-on-upgrading-from-astropy-0-2-to-a-newer-version">Crash on upgrading from Astropy 0.2 to a newer version</a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="http://github.com/astropy/astropy/tree/master/docs/known_issues.rst">Edit This Page on Github</a> &nbsp;
    <a href="_sources/known_issues.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011-2016, The Astropy Developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.5. &nbsp;
    Last built 29 Apr 2016. <br/>
  </p>
</footer>
  </body>
</html>