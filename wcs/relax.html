<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Relax constants &mdash; Astropy v1.2.dev15003</title>
    
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.dev15003',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="top" title="Astropy v1.2.dev15003" href="../index.html" />
    <link rel="up" title="World Coordinate System (astropy.wcs)" href="index.html" />
    <link rel="next" title="astropy.wcs History" href="history.html" />
    <link rel="prev" title="World Coordinate System (astropy.wcs)" href="index.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>
<script type="text/javascript" src="../_static/copybutton.js"></script>


  </head>
  <body role="document">
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="history.html" title="astropy.wcs History">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="index.html" title="World Coordinate System (astropy.wcs)">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">Astropy v1.2.dev15003</a>
	 &raquo;
      </li>
      <li><a href="index.html" accesskey="U">World Coordinate System (<code class="docutils literal"><span class="pre">astropy.wcs</span></code>)</a> &raquo;</li>
      
      <li>Relax constants</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="relax-constants">
<span id="relax"></span><h1>Relax constants<a class="headerlink" href="#relax-constants" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">relax</span></code> keyword argument controls the handling of non-standard
FITS WCS keywords.</p>
<p>Note that the default value of <code class="docutils literal"><span class="pre">relax</span></code> is <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">True</span></code></a> for reading (to
accept all non standard keywords), and <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">False</span></code></a> for writing (to write
out only standard keywords), in accordance with <a class="reference external" href="http://catb.org/jargon/html/P/Postels-Prescription.html">Postel&#8217;s prescription</a>:</p>
<blockquote>
<div>“Be liberal in what you accept, and conservative in what you send.”</div></blockquote>
<div class="section" id="header-reading-relaxation-constants">
<span id="relaxread"></span><h2>Header-reading relaxation constants<a class="headerlink" href="#header-reading-relaxation-constants" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../api/astropy.wcs.WCS.html#astropy.wcs.WCS" title="astropy.wcs.WCS"><code class="xref py py-obj docutils literal"><span class="pre">WCS</span></code></a>, <a class="reference internal" href="../api/astropy.wcs.Wcsprm.html#astropy.wcs.Wcsprm" title="astropy.wcs.Wcsprm"><code class="xref py py-obj docutils literal"><span class="pre">Wcsprm</span></code></a> and
<a class="reference internal" href="../api/astropy.wcs.find_all_wcs.html#astropy.wcs.find_all_wcs" title="astropy.wcs.find_all_wcs"><code class="xref py py-obj docutils literal"><span class="pre">find_all_wcs</span></code></a> have a <em>relax</em> argument, which may be
either <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">True</span></code></a>, <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">False</span></code></a> or an <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">int</span></code></a>.</p>
<ul>
<li><p class="first">If <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">True</span></code></a>, (default), all non-standard WCS extensions recognized by the parser
will be handled.</p>
</li>
<li><p class="first">If <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">False</span></code></a>, none of the extensions (even those in the
errata) will be handled.  Non-conformant keywords will be handled in
the same way as non-WCS keywords in the header, i.e. by simply
ignoring them.</p>
</li>
<li><p class="first">If an <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">int</span></code></a>, is is a bit field to provide fine-grained control over
what non-standard WCS keywords to accept.  The flag bits are subject
to change in future and should be set by using the constants
beginning with <code class="docutils literal"><span class="pre">WCSHDR_</span></code> in the <a class="reference internal" href="index.html#module-astropy.wcs" title="astropy.wcs"><code class="xref py py-obj docutils literal"><span class="pre">astropy.wcs</span></code></a> module.</p>
<p>For example, to accept <code class="docutils literal"><span class="pre">CD00i00j</span></code> and <code class="docutils literal"><span class="pre">PC00i00j</span></code> use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">relax</span> <span class="o">=</span> <span class="n">astropy</span><span class="o">.</span><span class="n">wcs</span><span class="o">.</span><span class="n">WCSHDR_CD00i00j</span> <span class="o">|</span> <span class="n">astropy</span><span class="o">.</span><span class="n">wcs</span><span class="o">.</span><span class="n">WCSHDR_PC00i00j</span>
</pre></div>
</div>
<p>The parser always treats <code class="docutils literal"><span class="pre">EPOCH</span></code> as subordinate to <code class="docutils literal"><span class="pre">EQUINOXa</span></code> if
both are present, and <code class="docutils literal"><span class="pre">VSOURCEa</span></code> is always subordinate to
<code class="docutils literal"><span class="pre">ZSOURCEa</span></code>.</p>
<p>Likewise, <code class="docutils literal"><span class="pre">VELREF</span></code> is subordinate to the formalism of WCS Paper
III.</p>
</li>
</ul>
<p>The flag bits are:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_none</span></code>: Don&#8217;t accept any extensions (not even those in the
errata).  Treat non-conformant keywords in the same way as non-WCS
keywords in the header, i.e. simply ignore them.  (This is
equivalent to passing <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">False</span></code></a>)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_all</span></code>: Accept all extensions recognized by the parser.  (This
is equivalent to the default behavior or passing <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">True</span></code></a>).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_reject</span></code>: Reject non-standard keyrecords (that are not
otherwise explicitly accepted by one of the flags below).  A warning
will be displayed by default.</p>
<p>This flag may be used to signal the presence of non-standard
keywords, otherwise they are simply passed over as though they did
not exist in the header.  It is mainly intended for testing
conformance of a FITS header to the WCS standard.</p>
<p>Keyrecords may be non-standard in several ways:</p>
<ul class="simple">
<li>The keyword may be syntactically valid but with keyvalue of
incorrect type or invalid syntax, or the keycomment may be
malformed.</li>
<li>The keyword may strongly resemble a WCS keyword but not, in fact,
be one because it does not conform to the standard.  For example,
<code class="docutils literal"><span class="pre">CRPIX01</span></code> looks like a <code class="docutils literal"><span class="pre">CRPIXja</span></code> keyword, but in fact the
leading zero on the axis number violates the basic FITS standard.
Likewise, <code class="docutils literal"><span class="pre">LONPOLE2</span></code> is not a valid <code class="docutils literal"><span class="pre">LONPOLEa</span></code> keyword in the
WCS standard, and indeed there is nothing the parser can sensibly
do with it.</li>
<li>Use of the keyword may be deprecated by the standard.  Such will
be rejected if not explicitly accepted via one of the flags below.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_CROTAia</span></code>: Accept <code class="docutils literal"><span class="pre">CROTAia</span></code>, <code class="docutils literal"><span class="pre">iCROTna</span></code>, <code class="docutils literal"><span class="pre">TCROTna</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_EPOCHa</span></code>:  Accept <code class="docutils literal"><span class="pre">EPOCHa</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_VELREFa</span></code>: Accept <code class="docutils literal"><span class="pre">VELREFa</span></code>.</p>
<blockquote>
<div><p>The constructor always recognizes the AIPS-convention
keywords, <code class="docutils literal"><span class="pre">CROTAn</span></code>, <code class="docutils literal"><span class="pre">EPOCH</span></code>, and <code class="docutils literal"><span class="pre">VELREF</span></code> for the
primary representation <code class="docutils literal"><span class="pre">(a</span> <span class="pre">=</span> <span class="pre">'</span> <span class="pre">')</span></code> but alternates are
non-standard.</p>
<p>The constructor accepts <code class="docutils literal"><span class="pre">EPOCHa</span></code> and <code class="docutils literal"><span class="pre">VELREFa</span></code> only if
<code class="docutils literal"><span class="pre">WCSHDR_AUXIMG</span></code> is also enabled.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_CD00i00j</span></code>: Accept <code class="docutils literal"><span class="pre">CD00i00j</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_PC00i00j</span></code>: Accept <code class="docutils literal"><span class="pre">PC00i00j</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_PROJPn</span></code>: Accept <code class="docutils literal"><span class="pre">PROJPn</span></code>.</p>
<blockquote>
<div><p>These appeared in early drafts of WCS Paper I+II (before they
were split) and are equivalent to <code class="docutils literal"><span class="pre">CDi_ja</span></code>, <code class="docutils literal"><span class="pre">PCi_ja</span></code>, and
<code class="docutils literal"><span class="pre">PVi_ma</span></code> for the primary representation <code class="docutils literal"><span class="pre">(a</span> <span class="pre">=</span> <span class="pre">'</span> <span class="pre">')</span></code>.
<code class="docutils literal"><span class="pre">PROJPn</span></code> is equivalent to <code class="docutils literal"><span class="pre">PVi_ma</span></code> with <code class="docutils literal"><span class="pre">m</span></code> = <code class="docutils literal"><span class="pre">n</span></code> &lt;=
9, and is associated exclusively with the latitude axis.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_CD0i_0ja</span></code>: Accept <code class="docutils literal"><span class="pre">CD0i_0ja</span></code> (wcspih()).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_PC0i_0ja</span></code>: Accept <code class="docutils literal"><span class="pre">PC0i_0ja</span></code> (wcspih()).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_PV0i_0ma</span></code>: Accept <code class="docutils literal"><span class="pre">PV0i_0ja</span></code> (wcspih()).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_PS0i_0ma</span></code>: Accept <code class="docutils literal"><span class="pre">PS0i_0ja</span></code> (wcspih()).</p>
<blockquote>
<div><p>Allow the numerical index to have a leading zero in doubly-
parameterized keywords, for example, <code class="docutils literal"><span class="pre">PC01_01</span></code>.  WCS Paper I
(Sects 2.1.2 &amp; 2.1.4) explicitly disallows leading zeroes.
The FITS 3.0 standard document (Sect. 4.1.2.1) states that the
index in singly-parameterized keywords (e.g. <code class="docutils literal"><span class="pre">CTYPEia</span></code>) &#8220;shall
not have leading zeroes&#8221;, and later in Sect. 8.1 that &#8220;leading
zeroes must not be used&#8221; on <code class="docutils literal"><span class="pre">PVi_ma</span></code> and <code class="docutils literal"><span class="pre">PSi_ma</span></code>.  However, by an
oversight, it is silent on <code class="docutils literal"><span class="pre">PCi_ja</span></code> and <code class="docutils literal"><span class="pre">CDi_ja</span></code>.</p>
<p>Only available if built with wcslib 5.0 or later.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_RADECSYS</span></code>: Accept <code class="docutils literal"><span class="pre">RADECSYS</span></code>.  This appeared in early
drafts of WCS Paper I+II and was subsequently replaced by
<code class="docutils literal"><span class="pre">RADESYSa</span></code>.  The constructor accepts <code class="docutils literal"><span class="pre">RADECSYS</span></code> only if
<code class="docutils literal"><span class="pre">WCSHDR_AUXIMG</span></code> is also enabled.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_VSOURCE</span></code>: Accept <code class="docutils literal"><span class="pre">VSOURCEa</span></code> or <code class="docutils literal"><span class="pre">VSOUna</span></code>.  This appeared
in early drafts of WCS Paper III and was subsequently dropped in
favour of <code class="docutils literal"><span class="pre">ZSOURCEa</span></code> and <code class="docutils literal"><span class="pre">ZSOUna</span></code>.  The constructor accepts
<code class="docutils literal"><span class="pre">VSOURCEa</span></code> only if <code class="docutils literal"><span class="pre">WCSHDR_AUXIMG</span></code> is also enabled.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_DOBSn</span></code>: Allow <code class="docutils literal"><span class="pre">DOBSn</span></code>, the column-specific analogue of
<code class="docutils literal"><span class="pre">DATE-OBS</span></code>.  By an oversight this was never formally defined in
the standard.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_LONGKEY</span></code>: Accept long forms of the alternate binary table
and pixel list WCS keywords, i.e. with &#8220;a&#8221; non- blank.
Specifically:</p>
<div class="highlight-python"><div class="highlight"><pre>jCRPXna  TCRPXna  :  jCRPXn  jCRPna  TCRPXn  TCRPna  CRPIXja
   -     TPCn_ka  :    -     ijPCna    -     TPn_ka  PCi_ja
   -     TCDn_ka  :    -     ijCDna    -     TCn_ka  CDi_ja
iCDLTna  TCDLTna  :  iCDLTn  iCDEna  TCDLTn  TCDEna  CDELTia
iCUNIna  TCUNIna  :  iCUNIn  iCUNna  TCUNIn  TCUNna  CUNITia
iCTYPna  TCTYPna  :  iCTYPn  iCTYna  TCTYPn  TCTYna  CTYPEia
iCRVLna  TCRVLna  :  iCRVLn  iCRVna  TCRVLn  TCRVna  CRVALia
iPVn_ma  TPVn_ma  :    -     iVn_ma    -     TVn_ma  PVi_ma
iPSn_ma  TPSn_ma  :    -     iSn_ma    -     TSn_ma  PSi_ma
</pre></div>
</div>
<p>where the primary and standard alternate forms together with the
image-header equivalent are shown rightwards of the colon.</p>
<p>The long form of these keywords could be described as quasi-
standard.  <code class="docutils literal"><span class="pre">TPCn_ka</span></code>, <code class="docutils literal"><span class="pre">iPVn_ma</span></code>, and <code class="docutils literal"><span class="pre">TPVn_ma</span></code> appeared by
mistake in the examples in WCS Paper II and subsequently these and
also <code class="docutils literal"><span class="pre">TCDn_ka</span></code>, <code class="docutils literal"><span class="pre">iPSn_ma</span></code> and <code class="docutils literal"><span class="pre">TPSn_ma</span></code> were legitimized by
the errata to the WCS papers.</p>
<p>Strictly speaking, the other long forms are non-standard and in fact
have never appeared in any draft of the WCS papers nor in the
errata.  However, as natural extensions of the primary form they are
unlikely to be written with any other intention.  Thus it should be
safe to accept them provided, of course, that the resulting keyword
does not exceed the 8-character limit.</p>
<p>If <code class="docutils literal"><span class="pre">WCSHDR_CNAMn</span></code> is enabled then also accept:</p>
<div class="highlight-python"><div class="highlight"><pre>iCNAMna  TCNAMna  :   ---   iCNAna    ---   TCNAna  CNAMEia
iCRDEna  TCRDEna  :   ---   iCRDna    ---   TCRDna  CRDERia
iCSYEna  TCSYEna  :   ---   iCSYna    ---   TCSYna  CSYERia
</pre></div>
</div>
<p>Note that <code class="docutils literal"><span class="pre">CNAMEia</span></code>, <code class="docutils literal"><span class="pre">CRDERia</span></code>, <code class="docutils literal"><span class="pre">CSYERia</span></code>, and their variants
are not used by <a class="reference internal" href="index.html#module-astropy.wcs" title="astropy.wcs"><code class="xref py py-obj docutils literal"><span class="pre">astropy.wcs</span></code></a> but are stored as auxiliary information.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_CNAMn</span></code>: Accept <code class="docutils literal"><span class="pre">iCNAMn</span></code>, <code class="docutils literal"><span class="pre">iCRDEn</span></code>, <code class="docutils literal"><span class="pre">iCSYEn</span></code>,
<code class="docutils literal"><span class="pre">TCNAMn</span></code>, <code class="docutils literal"><span class="pre">TCRDEn</span></code>, and <code class="docutils literal"><span class="pre">TCSYEn</span></code>, i.e. with <code class="docutils literal"><span class="pre">a</span></code> blank.
While non-standard, these are the obvious analogues of <code class="docutils literal"><span class="pre">iCTYPn</span></code>,
<code class="docutils literal"><span class="pre">TCTYPn</span></code>, etc.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_AUXIMG</span></code>: Allow the image-header form of an auxiliary WCS
keyword with representation-wide scope to provide a default value
for all images.  This default may be overridden by the
column-specific form of the keyword.</p>
<p>For example, a keyword like <code class="docutils literal"><span class="pre">EQUINOXa</span></code> would apply to all image
arrays in a binary table, or all pixel list columns with alternate
representation <code class="docutils literal"><span class="pre">a</span></code> unless overridden by <code class="docutils literal"><span class="pre">EQUIna</span></code>.</p>
<p>Specifically the keywords are:</p>
<div class="highlight-python"><div class="highlight"><pre>LATPOLEa  for LATPna
LONPOLEa  for LONPna
RESTFREQ  for RFRQna
RESTFRQa  for RFRQna
RESTWAVa  for RWAVna
</pre></div>
</div>
<p>whose keyvalues are actually used by WCSLIB, and also keywords that
provide auxiliary information that is simply stored in the wcsprm
struct:</p>
<div class="highlight-python"><div class="highlight"><pre>EPOCH         -       ... (No column-specific form.)
EPOCHa        -       ... Only if WCSHDR_EPOCHa is set.
EQUINOXa  for EQUIna
RADESYSa  for RADEna
RADECSYS  for RADEna  ... Only if WCSHDR_RADECSYS is set.
SPECSYSa  for SPECna
SSYSOBSa  for SOBSna
SSYSSRCa  for SSRCna
VELOSYSa  for VSYSna
VELANGLa  for VANGna
VELREF        -       ... (No column-specific form.)
VELREFa       -       ... Only if WCSHDR_VELREFa is set.
VSOURCEa  for VSOUna  ... Only if WCSHDR_VSOURCE is set.
WCSNAMEa  for WCSNna  ... Or TWCSna (see below).
ZSOURCEa  for ZSOUna

DATE-AVG  for DAVGn
DATE-OBS  for DOBSn
MJD-AVG   for MJDAn
MJD-OBS   for MJDOBn
OBSGEO-X  for OBSGXn
OBSGEO-Y  for OBSGYn
OBSGEO-Z  for OBSGZn
</pre></div>
</div>
<p>where the image-header keywords on the left provide default values
for the column specific keywords on the right.</p>
<p>Keywords in the last group, such as <code class="docutils literal"><span class="pre">MJD-OBS</span></code>, apply to all
alternate representations, so <code class="docutils literal"><span class="pre">MJD-OBS</span></code> would provide a default
value for all images in the header.</p>
<p>This auxiliary inheritance mechanism applies to binary table image
arrays and pixel lists alike.  Most of these keywords have no
default value, the exceptions being <code class="docutils literal"><span class="pre">LONPOLEa</span></code> and <code class="docutils literal"><span class="pre">LATPOLEa</span></code>,
and also <code class="docutils literal"><span class="pre">RADESYSa</span></code> and <code class="docutils literal"><span class="pre">EQUINOXa</span></code> which provide defaults for
each other.  Thus the only potential difficulty in using
<code class="docutils literal"><span class="pre">WCSHDR_AUXIMG</span></code> is that of erroneously inheriting one of these four
keywords.</p>
<p>Unlike <code class="docutils literal"><span class="pre">WCSHDR_ALLIMG</span></code>, the existence of one (or all) of these
auxiliary WCS image header keywords will not by itself cause a
<a class="reference internal" href="../api/astropy.wcs.Wcsprm.html#astropy.wcs.Wcsprm" title="astropy.wcs.Wcsprm"><code class="xref py py-obj docutils literal"><span class="pre">Wcsprm</span></code></a> object to be created for alternate
representation <code class="docutils literal"><span class="pre">a</span></code>.  This is because they do not provide
sufficient information to create a non-trivial coordinate
representation when used in conjunction with the default values of
those keywords, such as <code class="docutils literal"><span class="pre">CTYPEia</span></code>, that are parameterized by axis
number.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDR_ALLIMG</span></code>: Allow the image-header form of <em>all</em> image header
WCS keywords to provide a default value for all image arrays in a
binary table (n.b. not pixel list).  This default may be overridden
by the column-specific form of the keyword.</p>
<p>For example, a keyword like <code class="docutils literal"><span class="pre">CRPIXja</span></code> would apply to all image
arrays in a binary table with alternate representation <code class="docutils literal"><span class="pre">a</span></code>
unless overridden by <code class="docutils literal"><span class="pre">jCRPna</span></code>.</p>
<p>Specifically the keywords are those listed above for <code class="docutils literal"><span class="pre">WCSHDR_AUXIMG</span></code>
plus:</p>
<div class="highlight-python"><div class="highlight"><pre>WCSAXESa  for WCAXna
</pre></div>
</div>
<p>which defines the coordinate dimensionality, and the following
keywords which are parameterized by axis number:</p>
<div class="highlight-python"><div class="highlight"><pre>CRPIXja   for jCRPna
PCi_ja    for ijPCna
CDi_ja    for ijCDna
CDELTia   for iCDEna
CROTAi    for iCROTn
CROTAia        -      ... Only if WCSHDR_CROTAia is set.
CUNITia   for iCUNna
CTYPEia   for iCTYna
CRVALia   for iCRVna
PVi_ma    for iVn_ma
PSi_ma    for iSn_ma

CNAMEia   for iCNAna
CRDERia   for iCRDna
CSYERia   for iCSYna
</pre></div>
</div>
<p>where the image-header keywords on the left provide default values
for the column specific keywords on the right.</p>
<p>This full inheritance mechanism only applies to binary table image
arrays, not pixel lists, because in the latter case there is no
well-defined association between coordinate axis number and column
number.</p>
<p>Note that <code class="docutils literal"><span class="pre">CNAMEia</span></code>, <code class="docutils literal"><span class="pre">CRDERia</span></code>, <code class="docutils literal"><span class="pre">CSYERia</span></code>, and their variants
are not used by pywcs but are stored in the <a class="reference internal" href="../api/astropy.wcs.Wcsprm.html#astropy.wcs.Wcsprm" title="astropy.wcs.Wcsprm"><code class="xref py py-obj docutils literal"><span class="pre">Wcsprm</span></code></a>
object as auxiliary information.</p>
<p>Note especially that at least one <a class="reference internal" href="../api/astropy.wcs.Wcsprm.html#astropy.wcs.Wcsprm" title="astropy.wcs.Wcsprm"><code class="xref py py-obj docutils literal"><span class="pre">Wcsprm</span></code></a> object will
be returned for each <code class="docutils literal"><span class="pre">a</span></code> found in one of the image header keywords
listed above:</p>
<blockquote>
<div><ul class="simple">
<li>If the image header keywords for <code class="docutils literal"><span class="pre">a</span></code> <strong>are not</strong> inherited by
a binary table, then the struct will not be associated with any
particular table column number and it is up to the user to
provide an association.</li>
<li>If the image header keywords for <code class="docutils literal"><span class="pre">a</span></code> <strong>are</strong> inherited by a
binary table image array, then those keywords are considered to
be &#8220;exhausted&#8221; and do not result in a separate
<a class="reference internal" href="../api/astropy.wcs.Wcsprm.html#astropy.wcs.Wcsprm" title="astropy.wcs.Wcsprm"><code class="xref py py-obj docutils literal"><span class="pre">Wcsprm</span></code></a> object.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="header-writing-relaxation-constants">
<span id="relaxwrite"></span><h2>Header-writing relaxation constants<a class="headerlink" href="#header-writing-relaxation-constants" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../api/astropy.wcs.WCS.html#astropy.wcs.WCS.to_header" title="astropy.wcs.wcs.WCS"><code class="xref py py-obj docutils literal"><span class="pre">to_header</span></code></a> and <a class="reference internal" href="../api/astropy.wcs.WCS.html#astropy.wcs.WCS.to_header_string" title="astropy.wcs.wcs.WCS"><code class="xref py py-obj docutils literal"><span class="pre">to_header_string</span></code></a>
has a <em>relax</em> argument which may be either <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">True</span></code></a>, <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">False</span></code></a> or an
<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">int</span></code></a>.</p>
<ul class="simple">
<li>If <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">True</span></code></a>, write all recognized extensions.</li>
<li>If <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">False</span></code></a> (default), write all extensions that are considered to be
safe and recommended, equivalent to <code class="docutils literal"><span class="pre">WCSHDO_safe</span></code> (described below).</li>
<li>If an <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">int</span></code></a>, is is a bit field to provide fine-grained control over
what non-standard WCS keywords to accept.  The flag bits are subject
to change in future and should be set by using the constants
beginning with <code class="docutils literal"><span class="pre">WCSHDO_</span></code> in the <a class="reference internal" href="index.html#module-astropy.wcs" title="astropy.wcs"><code class="xref py py-obj docutils literal"><span class="pre">astropy.wcs</span></code></a> module.</li>
</ul>
<p>The flag bits are:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_none</span></code>: Don&#8217;t use any extensions.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_all</span></code>: Write all recognized extensions, equivalent to setting
each flag bit.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_safe</span></code>: Write all extensions that are considered to be safe
and recommended.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_DOBSn</span></code>: Write <code class="docutils literal"><span class="pre">DOBSn</span></code>, the column-specific analogue of
<code class="docutils literal"><span class="pre">DATE-OBS</span></code> for use in binary tables and pixel lists.  WCS Paper
III introduced <code class="docutils literal"><span class="pre">DATE-AVG</span></code> and <code class="docutils literal"><span class="pre">DAVGn</span></code> but by an oversight
<code class="docutils literal"><span class="pre">DOBSn</span></code> (the obvious analogy) was never formally defined by the
standard.  The alternative to using <code class="docutils literal"><span class="pre">DOBSn</span></code> is to write
<code class="docutils literal"><span class="pre">DATE-OBS</span></code> which applies to the whole table.  This usage is
considered to be safe and is recommended.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_TPCn_ka</span></code>: WCS Paper I defined</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">TPn_ka</span></code> and <code class="docutils literal"><span class="pre">TCn_ka</span></code> for pixel lists</p>
<p>but WCS Paper II uses <code class="docutils literal"><span class="pre">TPCn_ka</span></code> in one example and subsequently
the errata for the WCS papers legitimized the use of</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">TPCn_ka</span></code> and <code class="docutils literal"><span class="pre">TCDn_ka</span></code> for pixel lists</p>
<p>provided that the keyword does not exceed eight characters.  This
usage is considered to be safe and is recommended because of the
non-mnemonic terseness of the shorter forms.</p>
</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_PVn_ma</span></code>: WCS Paper I defined</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">iVn_ma</span></code> and <code class="docutils literal"><span class="pre">iSn_ma</span></code> for bintables and</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">TVn_ma</span></code> and <code class="docutils literal"><span class="pre">TSn_ma</span></code> for pixel lists</p>
<p>but WCS Paper II uses <code class="docutils literal"><span class="pre">iPVn_ma</span></code> and <code class="docutils literal"><span class="pre">TPVn_ma</span></code> in the examples
and subsequently the errata for the WCS papers legitimized the use
of</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">iPVn_ma</span></code> and <code class="docutils literal"><span class="pre">iPSn_ma</span></code> for bintables and</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">TPVn_ma</span></code> and <code class="docutils literal"><span class="pre">TPSn_ma</span></code> for pixel lists</p>
<p>provided that the keyword does not exceed eight characters.  This
usage is considered to be safe and is recommended because of the
non-mnemonic terseness of the shorter forms.</p>
</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_CRPXna</span></code>: For historical reasons WCS Paper I defined</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">jCRPXn</span></code>, <code class="docutils literal"><span class="pre">iCDLTn</span></code>, <code class="docutils literal"><span class="pre">iCUNIn</span></code>, <code class="docutils literal"><span class="pre">iCTYPn</span></code>, and <code class="docutils literal"><span class="pre">iCRVLn</span></code> for
bintables and</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">TCRPXn</span></code>, <code class="docutils literal"><span class="pre">TCDLTn</span></code>, <code class="docutils literal"><span class="pre">TCUNIn</span></code>, <code class="docutils literal"><span class="pre">TCTYPn</span></code>, and <code class="docutils literal"><span class="pre">TCRVLn</span></code> for
pixel lists</p>
<p>for use without an alternate version specifier.  However, because
of the eight-character keyword constraint, in order to accommodate
column numbers greater than 99 WCS Paper I also defined</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">jCRPna</span></code>, <code class="docutils literal"><span class="pre">iCDEna</span></code>, <code class="docutils literal"><span class="pre">iCUNna</span></code>, <code class="docutils literal"><span class="pre">iCTYna</span></code> and <code class="docutils literal"><span class="pre">iCRVna</span></code> for
bintables and</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">TCRPna</span></code>, <code class="docutils literal"><span class="pre">TCDEna</span></code>, <code class="docutils literal"><span class="pre">TCUNna</span></code>, <code class="docutils literal"><span class="pre">TCTYna</span></code> and <code class="docutils literal"><span class="pre">TCRVna</span></code> for
pixel lists</p>
<p>for use with an alternate version specifier (the <code class="docutils literal"><span class="pre">a</span></code>).  Like the
<code class="docutils literal"><span class="pre">PC</span></code>, <code class="docutils literal"><span class="pre">CD</span></code>, <code class="docutils literal"><span class="pre">PV</span></code>, and <code class="docutils literal"><span class="pre">PS</span></code> keywords there is an obvious
tendency to confuse these two forms for column numbers up to 99.
It is very unlikely that any parser would reject keywords in the
first set with a non-blank alternate version specifier so this
usage is considered to be safe and is recommended.</p>
</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_CNAMna</span></code>: WCS Papers I and III defined</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">iCNAna</span></code>,  <code class="docutils literal"><span class="pre">iCRDna</span></code>,  and <code class="docutils literal"><span class="pre">iCSYna</span></code>  for bintables and</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">TCNAna</span></code>,  <code class="docutils literal"><span class="pre">TCRDna</span></code>,  and <code class="docutils literal"><span class="pre">TCSYna</span></code>  for pixel lists</p>
<p>By analogy with the above, the long forms would be</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">iCNAMna</span></code>, <code class="docutils literal"><span class="pre">iCRDEna</span></code>, and <code class="docutils literal"><span class="pre">iCSYEna</span></code> for bintables and</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">TCNAMna</span></code>, <code class="docutils literal"><span class="pre">TCRDEna</span></code>, and <code class="docutils literal"><span class="pre">TCSYEna</span></code> for pixel lists</p>
<p>Note that these keywords provide auxiliary information only, none
of them are needed to compute world coordinates.  This usage is
potentially unsafe and is not recommended at this time.</p>
</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_WCSNna</span></code>: Write <code class="docutils literal"><span class="pre">WCSNna</span></code> instead of <code class="docutils literal"><span class="pre">TWCSna</span></code> for pixel
lists.  While the constructor treats <code class="docutils literal"><span class="pre">WCSNna</span></code> and <code class="docutils literal"><span class="pre">TWCSna</span></code> as
equivalent, other parsers may not.  Consequently, this usage is
potentially unsafe and is not recommended at this time.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_SIP</span></code>: Write out Simple Imaging Polynomial (SIP) keywords.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">WCSHDO_P12</span></code>, <code class="docutils literal"><span class="pre">WCSHDO_P13</span></code>, <code class="docutils literal"><span class="pre">WCSHDO_P14</span></code>, <code class="docutils literal"><span class="pre">WCSHDO_P15</span></code>, <code class="docutils literal"><span class="pre">WCSHDO_P16</span></code>, <code class="docutils literal"><span class="pre">WCSHDO_P17</span></code>, <code class="docutils literal"><span class="pre">WCSHDO_EFMT</span></code></p>
<p>These constants control the precision of the WCS keywords returned by <a class="reference internal" href="../api/astropy.wcs.WCS.html#astropy.wcs.WCS.to_header" title="astropy.wcs.WCS.to_header"><code class="xref py py-obj docutils literal"><span class="pre">to_header</span></code></a>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">WCSHDO_P12</span></code> : Use &#8220;%20.12G&#8221; format for all floating-point keyvalues (12 significant digits)</li>
<li><code class="docutils literal"><span class="pre">WCSHDO_P13</span></code> : Use &#8220;%21.13G&#8221; format for all floating-point keyvalues (13 significant digits)</li>
<li><code class="docutils literal"><span class="pre">WCSHDO_P14</span></code> : Use &#8220;%22.14G&#8221; format for all floating-point keyvalues (14 significant digits)</li>
<li><code class="docutils literal"><span class="pre">WCSHDO_P15</span></code> : Use &#8220;%23.15G&#8221; format for all floating-point keyvalues (15 significant digits)</li>
<li><code class="docutils literal"><span class="pre">WCSHDO_P16</span></code> : Use &#8220;%24.16G&#8221; format for all floating-point keyvalues (16 significant digits)</li>
<li><code class="docutils literal"><span class="pre">WCSHDO_P17</span></code> : Use &#8220;%25.17G&#8221; format for all floating-point keyvalues (17 significant digits)</li>
<li><code class="docutils literal"><span class="pre">WCSHDO_EFMT</span></code> : Use &#8220;%E&#8221; format instead of the default &#8220;%G&#8221; format above</li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Relax constants</a><ul>
<li><a class="reference internal" href="#header-reading-relaxation-constants">Header-reading relaxation constants</a></li>
<li><a class="reference internal" href="#header-writing-relaxation-constants">Header-writing relaxation constants</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="http://github.com/astropy/astropy/tree/master/docs/wcs/relax.rst">Edit This Page on Github</a> &nbsp;
    <a href="../_sources/wcs/relax.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011-2016, The Astropy Developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1. &nbsp;
    Last built 12 May 2016. <br/>
  </p>
</footer>
  </body>
</html>