<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Condensed example of contributing code to Astropy &mdash; Astropy v1.2.dev14994</title>
    
    <link rel="stylesheet" href="../../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.2.dev14994',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../../_static/astropy_logo.ico"/>
    <link rel="top" title="Astropy v1.2.dev14994" href="../../index.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>
<script type="text/javascript" src="../../_static/copybutton.js"></script>


  </head>
  <body role="document">
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="../../index.html">Astropy v1.2.dev14994</a>
	 &raquo;
      </li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="condensed-example-of-contributing-code-to-astropy">
<span id="command-history"></span><h1>Condensed example of contributing code to Astropy<a class="headerlink" href="#condensed-example-of-contributing-code-to-astropy" title="Permalink to this headline">¶</a></h1>
<p>There are two versions:</p>
<ul class="simple">
<li><a class="reference internal" href="#with-output"><span>Example, with output</span></a> (easier to read along with)</li>
<li><a class="reference internal" href="#no-output"><span>Example, no output</span></a> (easier to cut and paste from)</li>
</ul>
<div class="section" id="example-with-output">
<span id="with-output"></span><h2>Example, with output<a class="headerlink" href="#example-with-output" title="Permalink to this headline">¶</a></h2>
<p>In this version the commands are on the lines that begin <code class="docutils literal"><span class="pre">$</span></code> others are
comments or output.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#</span>
<span class="c"># Setup</span>
<span class="c">#</span>
<span class="c"># Start by cloning the repo from your GitHub account if you need to...</span>
<span class="nv">$ </span>git clone https://github.com/mwcraig/astropy.git apy-bugs
Cloning into <span class="s1">&#39;apy-bugs&#39;</span>...                                                      
remote: Counting objects: 44980, <span class="k">done</span>.                                          
remote: Compressing objects: 100% <span class="o">(</span>11772/11772<span class="o">)</span>, <span class="k">done</span>.                          
remote: Total <span class="m">44980</span> <span class="o">(</span>delta 32930<span class="o">)</span>, reused <span class="m">44980</span> <span class="o">(</span>delta 32930<span class="o">)</span>                   
Receiving objects: 100% <span class="o">(</span>44980/44980<span class="o">)</span>, 18.13 MiB <span class="p">|</span> 3.57 MiB/s, <span class="k">done</span>.            
Resolving deltas: 100% <span class="o">(</span>32930/32930<span class="o">)</span>, <span class="k">done</span>.                                     
Checking connectivity... <span class="k">done</span>.  

<span class="c"># ...then navigate to that clone in a terminal, and...</span>
<span class="nv">$ </span><span class="nb">cd </span>apy-bugs
<span class="c"># ...rename the origin remote make its meaning clearer and...</span>
<span class="nv">$ </span>git remote rename origin mwcraig
<span class="c"># ...remember to set up the official remote.</span>
<span class="nv">$ </span>git remote add astropy git://github.com/astropy/astropy.git

<span class="c"># get the latest from the official repo</span>
<span class="nv">$ </span>git fetch astropy
remote: Counting objects: 37, <span class="k">done</span>.                                             
remote: Compressing objects: 100% <span class="o">(</span>30/30<span class="o">)</span>, <span class="k">done</span>.                                
remote: Total <span class="m">37</span> <span class="o">(</span>delta 10<span class="o">)</span>, reused <span class="m">23</span> <span class="o">(</span>delta 7<span class="o">)</span>                                
Unpacking objects: 100% <span class="o">(</span>37/37<span class="o">)</span>, <span class="k">done</span>.                                          
From git://github.com/astropy/astropy                                           
 * <span class="o">[</span>new branch<span class="o">]</span>      master     -&gt; astropy/master                               
 * <span class="o">[</span>new branch<span class="o">]</span>      stable     -&gt; astropy/stable                               
 * <span class="o">[</span>new branch<span class="o">]</span>      v0.1.x     -&gt; astropy/v0.1.x                               
 * <span class="o">[</span>new branch<span class="o">]</span>      v0.2.x     -&gt; astropy/v0.2.x                               
 * <span class="o">[</span>new branch<span class="o">]</span>      v0.3.x     -&gt; astropy/v0.3.x  
<span class="c">#</span>
<span class="c"># Make a new branch for this fix</span>
<span class="c">#</span>
<span class="nv">$ </span>git branch i-1761 astropy/master <span class="c"># branch just for this work</span>
Branch i-1761 <span class="nb">set </span>up to track remote branch master from astropy.

<span class="nv">$ </span>git checkout i-1761               <span class="c"># work on this branch</span>
Switched to branch <span class="s1">&#39;i-1761&#39;</span>                                                     
Your branch is up-to-date with <span class="s1">&#39;astropy/master&#39;</span>. 

<span class="c"># let my github account know about this branch</span>
<span class="nv">$ </span>git push --set-upstream mwcraig i-1761 <span class="c"># Hey GitHub, get ready to receive my work</span>
Branch i-1761 <span class="nb">set </span>up to track remote branch i-1761 from mwcraig.                
Everything up-to-date  

<span class="c">#</span>
<span class="c"># Make a python environment for this work -- conda version shown</span>
<span class="c">#</span>
<span class="nv">$ </span>conda create -n apy-1761 --clone root   <span class="c"># copy my default environment</span>
Output not shown

<span class="nv">$ </span><span class="nb">source </span>activate apy-1761                <span class="c"># switch to this environment</span>
prepending /Users/mcraig/anaconda/envs/apy-1761/bin to PATH

<span class="c"># next step DOES NOT WORK in python 3</span>
<span class="nv">$ </span>python setup.py develop   <span class="c"># install astropy, python 2</span>
<span class="c"># using python 3? do this instead: python3 setup.py install</span>
Configured with: --prefix<span class="o">=</span>/Applications/Xcode.app/Contents/Developer/usr --with-
gxx-include-dir<span class="o">=</span>/usr/include/c++/4.2.1                                          
running develop                                                                 
running egg_info                                                                
writing requirements to astropy.egg-info/requires.txt                           
writing astropy.egg-info/PKG-INFO
...
Using /Users/mcraig/anaconda/envs/apy-1761/lib/python2.7/site-packages          
Finished processing dependencies <span class="k">for</span> <span class="nv">astropy</span><span class="o">==</span>0.4.dev6873  

<span class="c">#</span>
<span class="c"># Check setup by running tests</span>
<span class="c">#</span>
<span class="nv">$ </span><span class="nb">cd </span>astropy/coordinates/tests    <span class="c"># get ready to run coordinate tests</span>
<span class="nv">$ </span>py.test                         <span class="c"># test</span>
<span class="o">=============================</span> <span class="nb">test </span>session <span class="nv">starts</span> <span class="o">==============================</span>
platform darwin -- Python 2.7.6 -- pytest-2.4.2

Running tests with Astropy version 0.4.dev6877.
Running tests in /Users/mcraig/Development/astronomy/apy-bugs/astropy/coordinates/tests.

Platform: Darwin-13.0.0-x86_64-i386-64bit

Executable: /Users/mcraig/anaconda/envs/apy-1761/bin/python

Full Python Version:
2.7.6 <span class="p">|</span>Anaconda 1.8.0 <span class="o">(</span>x86_64<span class="o">)</span><span class="p">|</span> <span class="o">(</span>default, Nov <span class="m">11</span> 2013, 10:49:09<span class="o">)</span>
<span class="o">[</span>GCC 4.0.1 <span class="o">(</span>Apple Inc. build 5493<span class="o">)]</span>

encodings: sys: ascii, locale: US-ASCII, filesystem: utf-8, unicode bits: 15
byteorder: little
float info: dig: 15, mant_dig: 15

Numpy: 1.7.1
Scipy: 0.13.0
Matplotlib: 1.3.1
h5py: 2.2.0

plugins: capturelog
collected <span class="m">103</span> items / <span class="m">2</span> skipped

test_angles.py .......................
test_angular_separation.py ..
test_api.py ............
test_arrays.py .............
test_distance.py ........
test_formatting.py ....................
test_matching.py ....
test_name_resolve.py ss
test_transformations.py ...............
accuracy/test_fk4_no_e_fk4.py .
accuracy/test_fk4_no_e_fk5.py .
accuracy/test_galactic_fk4.py .
accuracy/test_icrs_fk5.py .

<span class="o">===================</span> <span class="m">101</span> passed, <span class="m">4</span> skipped in 152.23 <span class="nv">seconds</span> <span class="o">===================</span>

<span class="nv">$ </span>ls   <span class="c"># what is here?</span>
__init__.py                test_api.pyc                                         
__init__.pyc               test_arrays.py                                       
__pycache__                test_distance.py                                     
accuracy                   test_formatting.py                                   
test_angles.py             test_matching.py                                     
test_angular_separation.py test_name_resolve.py                                 
test_api.py                test_transformations.py  
<span class="c">#</span>
<span class="c"># Write a test in test_arrays.py to expose this bug</span>
<span class="c"># </span>
<span class="c"># After edit, re-test</span>
<span class="c">#</span>
<span class="nv">$ </span>py.test test_arrays.py <span class="c"># Hopefully this FAILS--we are trying to expose bug</span>
                                                                                
Running tests with Astropy version 0.4.dev6873.                                 
Running tests in test_arrays.py.                                                
                                                                                
Platform: Darwin-13.0.0-x86_64-i386-64bit                                       
                                                                                
Executable: /Users/mcraig/anaconda/envs/apy-1761/bin/python                     
                                                                                
Full Python Version:                                                            
2.7.6 <span class="p">|</span>Anaconda 1.8.0 <span class="o">(</span>x86_64<span class="o">)</span><span class="p">|</span> <span class="o">(</span>default, Nov <span class="m">11</span> 2013, 10:49:09<span class="o">)</span>                
<span class="o">[</span>GCC 4.0.1 <span class="o">(</span>Apple Inc. build 5493<span class="o">)]</span>                                             
                                                                                
encodings: sys: ascii, locale: US-ASCII, filesystem: utf-8, unicode bits: <span class="m">15</span>    
byteorder: little                                                               
float info: dig: 15, mant_dig: <span class="m">15</span>                                               
                                                                                
Numpy: 1.7.1                                                                    
Scipy: 0.13.0                                                                   
Matplotlib: 1.3.1                                                               
h5py: 2.2.0                                                                     
                                                                                
plugins: capturelog                                                             
collected <span class="m">13</span> items                                                              
                                                                                
test_arrays.py ............F                                                    
                                                                                
<span class="o">===================================</span> <span class="nv">FAILURES</span> <span class="o">===================================</span>
________________________________ test_array_len ________________________________
                                                                                
    def test_array_len<span class="o">()</span>:                                                       
        from .. import ICRS                                                     
                                                                                
        <span class="nv">input_length</span> <span class="o">=</span> <span class="m">5</span>                                                        
        <span class="nv">ra</span> <span class="o">=</span> np.linspace<span class="o">(</span>0, 360, input_length<span class="o">)</span>                                  
        <span class="nv">dec</span> <span class="o">=</span> np.linspace<span class="o">(</span>0, 90, input_length<span class="o">)</span>                                  
                                                                                
        <span class="nv">c</span> <span class="o">=</span> ICRS<span class="o">(</span>ra, dec, <span class="nv">unit</span><span class="o">=(</span>u.degree, u.degree<span class="o">))</span>                            
                                                                                
&gt;       assert len<span class="o">(</span>c<span class="o">)</span> <span class="o">==</span> input_length                                           
E       TypeError: object of <span class="nb">type</span> <span class="s1">&#39;ICRS&#39;</span> has no len<span class="o">()</span>                           
                                                                                
test_arrays.py:291: <span class="nv">TypeError</span>                                                   
<span class="o">=====================</span> <span class="m">1</span> failed, <span class="m">12</span> passed in 2.49 <span class="nv">seconds</span> <span class="o">======================</span>

<span class="c"># Good, failure, as expected.</span>
<span class="c">#</span>
<span class="c"># what did we do? Remind me, git</span>
<span class="c">#</span>
<span class="nv">$ </span>git status                     
On branch i-1761                                                                
Your branch is up-to-date with <span class="s1">&#39;mwcraig/i-1761&#39;</span>.                                
                                                                                
Changes not staged <span class="k">for</span> commit:                                                  
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>                    
  <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>     
                                                                                
        modified:   test_arrays.py                                              
                                                                                
no changes added to commit <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> and/or <span class="s2">&quot;git commit -a&quot;</span><span class="o">)</span>       

<span class="c">#</span>
<span class="c"># How about more detail, git?</span>
<span class="nv">$ </span>git diff
diff --git a/astropy/coordinates/tests/test_arrays.py b/astropy/coordinates/test
index 2785b59..7eecfbb <span class="m">100644</span>                                                   
--- a/astropy/coordinates/tests/test_arrays.py                                  
+++ b/astropy/coordinates/tests/test_arrays.py                                  
@@ -278,3 +278,14 @@ def test_array_indexing<span class="o">()</span>:                                 
     assert c2.equinox <span class="o">==</span> c1.equinox                                            
     assert c3.equinox <span class="o">==</span> c1.equinox                                            
     assert c4.equinox <span class="o">==</span> c1.equinox                                            
+                                                                               
+def test_array_len<span class="o">()</span>:                                                          
+    from .. import ICRS                                                        
+                                                                               
+    <span class="nv">input_length</span> <span class="o">=</span> <span class="m">5</span>                                                           
+    <span class="nv">ra</span> <span class="o">=</span> np.linspace<span class="o">(</span>0, 360, input_length<span class="o">)</span>                                     
+    <span class="nv">dec</span> <span class="o">=</span> np.linspace<span class="o">(</span>0, 90, input_length<span class="o">)</span>                                     
+                                                                               
+    <span class="nv">c</span> <span class="o">=</span> ICRS<span class="o">(</span>ra, dec, <span class="nv">unit</span><span class="o">=(</span>u.degree, u.degree<span class="o">))</span>                               
+                                                                               
+    assert len<span class="o">(</span>c<span class="o">)</span> <span class="o">==</span> input_length 

<span class="c">#</span>
<span class="c"># Stage, then commit</span>
<span class="nv">$ </span>git add test_arrays.py          <span class="c"># get ready to commit</span>
<span class="c"># always include a message with your commits</span>
<span class="nv">$ </span>git commit -m<span class="s1">&#39;Add test for array coordinate length (issue #1761)&#39;</span>
<span class="o">[</span>i-1761 23ba4ce<span class="o">]</span> Add <span class="nb">test </span><span class="k">for</span> array coordinate length <span class="o">(</span>issue <span class="c">#1761)             </span>
 <span class="m">1</span> file changed, <span class="m">11</span> insertions<span class="o">(</span>+<span class="o">)</span>   

<span class="c">#</span>
<span class="c"># Now fix the bug...edit ../coordsystems.py</span>
<span class="c">#</span>
<span class="c"># Code fix made in editor</span>
<span class="c">#</span>
<span class="c"># Test change</span>
<span class="c">#</span>
<span class="nv">$ </span>py.test test_arrays.py   <span class="c"># Did our fix actually fix the problem?</span>
<span class="o">=============================</span> <span class="nb">test </span>session <span class="nv">starts</span> <span class="o">==============================</span>
platform darwin -- Python 2.7.6 -- pytest-2.4.2                                 
                                                                                
Running tests with Astropy version 0.4.dev6874.                                 
Running tests in test_arrays.py.                                                
                                                                                
Platform: Darwin-13.0.0-x86_64-i386-64bit                                       
                                                                                
Executable: /Users/mcraig/anaconda/envs/apy-1761/bin/python                     
                                                                                
Full Python Version:                                                            
2.7.6 <span class="p">|</span>Anaconda 1.8.0 <span class="o">(</span>x86_64<span class="o">)</span><span class="p">|</span> <span class="o">(</span>default, Nov <span class="m">11</span> 2013, 10:49:09<span class="o">)</span>                
<span class="o">[</span>GCC 4.0.1 <span class="o">(</span>Apple Inc. build 5493<span class="o">)]</span>                                             
                                                                                
encodings: sys: ascii, locale: US-ASCII, filesystem: utf-8, unicode bits: <span class="m">15</span>    
byteorder: little                                                               
float info: dig: 15, mant_dig: <span class="m">15</span>                                               
                                                                                
Numpy: 1.7.1                                                                    
Scipy: 0.13.0                                                                   
Matplotlib: 1.3.1                                                               
h5py: 2.2.0                                                                     
                                                                                
plugins: capturelog                                                             
collected <span class="m">13</span> items                                                              
                                                                                
test_arrays.py .............                                                    
                                                                                
<span class="o">==========================</span> <span class="m">13</span> passed in 2.60 <span class="nv">seconds</span> <span class="o">===========================</span>

<span class="c"># Great! We fixed it!</span>
<span class="c">#</span>
<span class="c"># Run all of the coordinate tests to make sure we broke nothing...</span>
<span class="nv">$ </span>py.test                        <span class="c"># do all of the coordinate tests pass?</span>
<span class="o">=============================</span> <span class="nb">test </span>session <span class="nv">starts</span> <span class="o">==============================</span>
platform darwin -- Python 2.7.6 -- pytest-2.4.2

Running tests with Astropy version 0.4.dev6877.
Running tests in /Users/mcraig/Development/astronomy/apy-bugs/astropy/coordinates/tests.

Platform: Darwin-13.0.0-x86_64-i386-64bit

Executable: /Users/mcraig/anaconda/envs/apy-1761/bin/python

Full Python Version:
2.7.6 <span class="p">|</span>Anaconda 1.8.0 <span class="o">(</span>x86_64<span class="o">)</span><span class="p">|</span> <span class="o">(</span>default, Nov <span class="m">11</span> 2013, 10:49:09<span class="o">)</span>
<span class="o">[</span>GCC 4.0.1 <span class="o">(</span>Apple Inc. build 5493<span class="o">)]</span>

encodings: sys: ascii, locale: US-ASCII, filesystem: utf-8, unicode bits: 15
byteorder: little
float info: dig: 15, mant_dig: 15

Numpy: 1.7.1
Scipy: 0.13.0
Matplotlib: 1.3.1
h5py: 2.2.0

plugins: capturelog
collected <span class="m">103</span> items / <span class="m">2</span> skipped

test_angles.py .......................
test_angular_separation.py ..
test_api.py ............
test_arrays.py .............
test_distance.py ........
test_formatting.py ....................
test_matching.py ....
test_name_resolve.py ss
test_transformations.py ...............
accuracy/test_fk4_no_e_fk4.py .
accuracy/test_fk4_no_e_fk5.py .
accuracy/test_galactic_fk4.py .
accuracy/test_icrs_fk5.py .

<span class="o">===================</span> <span class="m">101</span> passed, <span class="m">4</span> skipped in 152.23 <span class="nv">seconds</span> <span class="o">===================</span>

<span class="c"># So far, so good, now check ALL tests</span>
<span class="nv">$ </span><span class="nb">cd</span> ../../..                       <span class="c"># up to the top level to check all of the tests</span>
<span class="nv">$ </span>python setup.py <span class="nb">test</span>           <span class="c"># grab a coffee now; this takes a while</span>
onfigured with: --prefix<span class="o">=</span>/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir<span class="o">=</span>/usr/include/c++/4.2.1
Freezing version number to astropy/version.py
running <span class="nb">test</span>
running build
running build_py
copying astropy/version.py -&gt; build/lib.macosx-10.5-x86_64-2.7/astropy
copying astropy/coordinates/tests/test_arrays.py -&gt; build/lib.macosx-10.5-x86_64-2.7/astropy/coordinates/tests
...
OUTPUT TRUNCATED

<span class="c">#</span>
<span class="c"># Success! Commit our change</span>
<span class="c">#</span>
<span class="nv">$ </span>git status                     <span class="c"># check what we have changed, if you forgot</span>
On branch i-1761                                                                
Your branch is ahead of <span class="s1">&#39;mwcraig/i-1761&#39;</span> by <span class="m">1</span> commit.                           
  <span class="o">(</span>use <span class="s2">&quot;git push&quot;</span> to publish your <span class="nb">local </span>commits<span class="o">)</span>                                
                                                                                
Changes not staged <span class="k">for</span> commit:                                                  
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>                    
  <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>     
                                                                                
        modified:   astropy/coordinates/coordsystems.py                         
                                                                                
no changes added to commit <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> and/or <span class="s2">&quot;git commit -a&quot;</span><span class="o">)</span> 

<span class="c"># stage change</span>
<span class="nv">$ </span>git add astropy/coordinates/coordsystems.py <span class="c"># Copy and paste path from git status</span>
                                             <span class="c"># unless you like typing</span>
<span class="c"># commit, with message!</span>
<span class="nv">$ </span>git commit -m<span class="s2">&quot;</span>
<span class="s2">    &gt; Add len() to coordinates</span>
<span class="s2">    &gt;</span>
<span class="s2">    &gt; Closes #1761&quot;</span>
<span class="o">[</span>i-1761 9688f7e<span class="o">]</span> Add len<span class="o">()</span> to coordinates                                       
 <span class="m">1</span> file changed, <span class="m">2</span> insertions<span class="o">(</span>+<span class="o">)</span>  

<span class="c"># copy changes to the i-1761 branch in my github account...</span>
<span class="nv">$ </span>git push           <span class="c"># or not--can wait until you are completely done</span>
Counting objects: 52, <span class="k">done</span>.                                                     
Delta compression using up to <span class="m">2</span> threads.                                        
Compressing objects: 100% <span class="o">(</span>11/11<span class="o">)</span>, <span class="k">done</span>.                                        
Writing objects: 100% <span class="o">(</span>11/11<span class="o">)</span>, 1.01 KiB <span class="p">|</span> <span class="m">0</span> bytes/s, <span class="k">done</span>.                      
Total <span class="m">11</span> <span class="o">(</span>delta 9<span class="o">)</span>, reused <span class="m">0</span> <span class="o">(</span>delta 0<span class="o">)</span>                                          
To https://github.com/mwcraig/astropy.git                                       
   7fa981e..9688f7e  i-1761 -&gt; i-1761  

<span class="c">#</span>
<span class="c"># Oops! Forgot to include some tests!</span>
<span class="c">#</span>
<span class="nv">$ </span><span class="nb">cd </span>astropy/coordinates/tests   <span class="c"># back to add more tests</span>
<span class="c">#</span>
<span class="c"># edit test_arrays.py to add tests to test_array_len</span>
<span class="c">#</span>
<span class="c"># Now re-test</span>
<span class="c">#</span>
<span class="nv">$ </span>py.test test_arrays.py  <span class="c"># do these tests pass with the new tests?</span>
<span class="o">=============================</span> <span class="nb">test </span>session <span class="nv">starts</span> <span class="o">==============================</span>
platform darwin -- Python 2.7.6 -- pytest-2.4.2                                 
                                                                                
Running tests with Astropy version 0.4.dev6874.                                 
Running tests in test_arrays.py.                                                
                                                                                
Platform: Darwin-13.0.0-x86_64-i386-64bit                                       
                                                                                
Executable: /Users/mcraig/anaconda/envs/apy-1761/bin/python                     
                                                                                
Full Python Version:                                                            
2.7.6 <span class="p">|</span>Anaconda 1.8.0 <span class="o">(</span>x86_64<span class="o">)</span><span class="p">|</span> <span class="o">(</span>default, Nov <span class="m">11</span> 2013, 10:49:09<span class="o">)</span>                
<span class="o">[</span>GCC 4.0.1 <span class="o">(</span>Apple Inc. build 5493<span class="o">)]</span>                                             
                                                                                
encodings: sys: ascii, locale: US-ASCII, filesystem: utf-8, unicode bits: <span class="m">15</span>    
byteorder: little                                                               
float info: dig: 15, mant_dig: <span class="m">15</span>                                               
                                                                                
Numpy: 1.7.1                                                                    
Scipy: 0.13.0                                                                   
Matplotlib: 1.3.1                                                               
h5py: 2.2.0                                                                     
                                                                                
plugins: capturelog                                                             
collected <span class="m">13</span> items                                                              
                                                                                
test_arrays.py .............                                                    
                                                                                
<span class="o">==========================</span> <span class="m">13</span> passed in 2.60 <span class="nv">seconds</span> <span class="o">===========================</span>

<span class="c">#</span>
<span class="c">#   yes! now move up a couple of levels to check all tests</span>
<span class="c">#</span>
<span class="c">#   Do I really have to re-test everything? It certainly never hurts and</span>
<span class="c">#   potentially saves time for the maintainers if you have introduced a bug.</span>
<span class="c">#</span>
<span class="nv">$ </span><span class="nb">cd</span> ../../..          <span class="c"># back to the top level</span>
<span class="nv">$ </span>python setup.py <span class="nb">test</span> <span class="c"># grab another coffee....</span>
OUTPUT OMITTED

<span class="c">#</span>
<span class="c"># Success! Time to commit</span>
<span class="c">#</span>
<span class="nv">$ </span>git status           <span class="c"># optional, but useful for figuring out what to add</span>
On branch i-1761                                                                
Your branch is up-to-date with <span class="s1">&#39;mwcraig/i-1761&#39;</span>.                                
                                                                                
Changes not staged <span class="k">for</span> commit:                                                  
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>                    
  <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>     
                                                                                
        modified:   astropy/coordinates/tests/test_arrays.py                                              
                                                                                
no changes added to commit <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> and/or <span class="s2">&quot;git commit -a&quot;</span><span class="o">)</span>

<span class="c"># </span>
<span class="c"># Stage...</span>
<span class="nv">$ </span>git add astropy/coordinates/tests/test_arrays.py <span class="c"># use path git status supplies</span>

<span class="c"># Commit, with a message...</span>
<span class="nv">$ </span>git commit -m<span class="s2">&quot;Add tests of len() for scalar coordinate and length 1 coordinate&quot;</span>
<span class="o">[</span>i-1761 ed92c2d<span class="o">]</span> Add tests of len<span class="o">()</span> <span class="k">for</span> scalar coordinate and length <span class="m">1</span> coordinat
e                                                                               
 <span class="m">1</span> file changed, <span class="m">10</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">5</span> deletions<span class="o">(</span>-<span class="o">)</span> 

<span class="c"># Almost done...</span>
<span class="c">#</span>
<span class="c"># Edit the changelog in CHANGES.rst</span>
<span class="c">#</span>
<span class="c"># Then commit changes</span>
<span class="c">#</span>
<span class="nv">$ </span>git add CHANGES.rst
<span class="nv">$ </span>git commit -m<span class="s2">&quot;Add changelog entry for 1761&quot;</span>
<span class="o">[</span>i-1761 bf6fcfc<span class="o">]</span> Add changelog entry <span class="k">for</span> <span class="m">1761</span>                                   
 <span class="m">1</span> file changed, <span class="m">2</span> insertions<span class="o">(</span>+<span class="o">)</span>                                                

<span class="c">#</span>
<span class="c"># Push changes to my GitHub account</span>
<span class="c">#</span>
<span class="nv">$ </span>git push   <span class="c"># make sure all of our changes are in our github account</span>
Counting objects: 47, <span class="k">done</span>.                                                     
Delta compression using up to <span class="m">2</span> threads.                                        
Compressing objects: 100% <span class="o">(</span>8/8<span class="o">)</span>, <span class="k">done</span>.                                          
Writing objects: 100% <span class="o">(</span>8/8<span class="o">)</span>, <span class="m">836</span> bytes <span class="p">|</span> <span class="m">0</span> bytes/s, <span class="k">done</span>.                       
Total <span class="m">8</span> <span class="o">(</span>delta 6<span class="o">)</span>, reused <span class="m">0</span> <span class="o">(</span>delta 0<span class="o">)</span>                                           
To https://github.com/mwcraig/astropy.git                                       
   9688f7e..bf6fcfc  i-1761 -&gt; i-1761 

<span class="c">#</span>
<span class="c"># Go to GitHub to make pull request. Remember to switch to this branch before </span>
<span class="c"># pushing the pull request button.</span>
<span class="c">#</span>
</pre></div>
</div>
</div>
<div class="section" id="example-no-output">
<span id="no-output"></span><h2>Example, no output<a class="headerlink" href="#example-no-output" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#</span>
<span class="c"># Setup</span>
<span class="c">#</span>
<span class="c"># Start by cloning the repo from your GitHub account if you need to...</span>
git clone https://github.com/mwcraig/astropy.git apy-bugs
<span class="c"># ...then navigate to that clone in a terminal, and...</span>
<span class="nb">cd </span>apy-bugs
<span class="c"># ...rename the origin remote make its meaning clearer and...</span>
git remote rename origin mwcraig
<span class="c"># ...remember to set up the official remote.</span>
git remote add astropy git://github.com/astropy/astropy.git
<span class="c"># get the latest from the official repo</span>
git fetch astropy
<span class="c">#</span>
<span class="c"># Make a new branch for this fix</span>
<span class="c">#</span>
git branch i-1761 astropy/master <span class="c"># branch just for this work</span>
git checkout i-1761               <span class="c"># work on this branch</span>
git push --set-upstream mwcraig i-1761 <span class="c"># Hey GitHub, get ready to receive my work</span>
<span class="c">#</span>
<span class="c"># Make a python environment for this work -- conda version shown</span>
<span class="c">#</span>
conda create -n apy-1761 --clone root   <span class="c"># copy my default environment</span>
<span class="nb">source </span>activate apy-1761                <span class="c"># switch to this environment</span>
<span class="c"># next step DOES NOT WORK in python 3</span>
python setup.py develop                 <span class="c"># install astropy</span>
<span class="c">#</span>
<span class="c"># Check setup by running tests</span>
<span class="c">#</span>
<span class="nb">cd </span>astropy/coordinates/tests    <span class="c"># get ready to run coordinate tests</span>
py.test                         <span class="c"># test</span>
ls                              <span class="c"># what is here?</span>
<span class="c">#</span>
<span class="c"># Write a test in test_arrays.py to expose this bug</span>
<span class="c"># </span>
<span class="c"># After edit, re-test</span>
<span class="c">#</span>
py.test test_arrays.py          <span class="c"># Hopefully this succeeds</span>
<span class="c">#</span>
<span class="c"># Commit changes to local git</span>
<span class="c">#</span>
git status                      <span class="c"># what did we do? Remind me, git</span>
git add test_arrays.py          <span class="c"># get ready to commit</span>
<span class="c"># always include a message with your commits</span>
git commit -m<span class="s1">&#39;Add test for array coordinate length (issue #1761)&#39;</span>
git status                      <span class="c"># Best to be informed!</span>
<span class="c">#</span>
<span class="c"># Edit test_arrays.py</span>
<span class="c">#</span>
<span class="nb">cd</span> ..                           <span class="c"># up a level to coordinates</span>
<span class="c">#</span>
<span class="c"># Code fix made in editor</span>
<span class="c">#</span>
<span class="c">#</span>
<span class="c"># Test change</span>
<span class="c">#</span>
py.test tests/test_arrays.py   <span class="c"># Did our fix actually fix the problem?</span>
py.test                        <span class="c"># do all of the coordinate tests pass?</span>
<span class="nb">cd</span> ../..                       <span class="c"># up to the top level to check all of the tests</span>
python setup.py <span class="nb">test</span>           <span class="c"># grab a coffee now; this takes a while</span>
<span class="c">#</span>
<span class="c"># Success! Commit our change</span>
<span class="c">#</span>
git status                     <span class="c"># check what we have changed, if you forgot</span>
git add astropy/coordinates/coordsystems.py  <span class="c"># Copy and paste path from git status</span>
                                             <span class="c"># unless you like typing</span>
<span class="c"># check git staus again if you want...or not.</span>
<span class="c"># commit, with message!</span>
git commit -m<span class="s2">&quot;</span>
<span class="s2">    &gt; Add len() to coordinates</span>
<span class="s2">    &gt;</span>
<span class="s2">    &gt; Closes #1761&quot;</span>
git push                       <span class="c"># or not--can wait until you are completely done</span>
<span class="c">#</span>
<span class="c"># Oops! Forgot to include some tests!</span>
<span class="c">#</span>
<span class="nb">cd </span>astropy/coordinates/tests   <span class="c"># back to add more tests</span>
<span class="c">#</span>
<span class="c"># edit test_arrays.py to add tests to test_array_len</span>
<span class="c">#</span>
<span class="c"># Now re-test</span>
<span class="c">#</span>
py.test test_arrays.py  <span class="c"># do these tests pass with the new tests?</span>
<span class="c">#   yes! now move up a couple of levels to check all tests</span>
<span class="c">#</span>
<span class="c">#   Do I really have to re-test everything? It certainly never hurts and</span>
<span class="c">#   potentially saves time for the maintainers if you have introduced a bug.</span>
<span class="c">#</span>
<span class="nb">cd</span> ../../..          <span class="c"># back to the top level</span>
python setup.py <span class="nb">test</span> <span class="c"># grab another coffee....</span>
<span class="c">#</span>
<span class="c"># Success! Time to commit</span>
<span class="c">#</span>
git status           <span class="c"># optional, but useful for figuring out what to add</span>
git add astropy/coordinates/tests/test_arrays.py <span class="c"># use path git status supplies</span>
<span class="c"># Commit, with a message...</span>
git commit -m<span class="s2">&quot;Add tests of len() for scalar coordinate and length 1 coordinate&quot;</span>
<span class="c">#</span>
<span class="c"># Edit the changelog in CHANGES.rst</span>
<span class="c">#</span>
<span class="c"># Then commit changes</span>
<span class="c">#</span>
git add CHANGES.rst
git commit -m<span class="s2">&quot;Add changelog entry for 1761&quot;</span>
<span class="c">#</span>
<span class="c"># Push changes to my GitHub account</span>
<span class="c">#</span>
git push   <span class="c"># make sure all of our changes are in our github account</span>
<span class="c">#</span>
<span class="c"># Go to GitHub to make pull request. Remember to switch to this branch before </span>
<span class="c"># pushing the pull request button.</span>
<span class="c">#</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Condensed example of contributing code to Astropy</a><ul>
<li><a class="reference internal" href="#example-with-output">Example, with output</a></li>
<li><a class="reference internal" href="#example-no-output">Example, no output</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="http://github.com/astropy/astropy/tree/master/docs/development/workflow/command_history.rst">Edit This Page on Github</a> &nbsp;
    <a href="../../_sources/development/workflow/command_history.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011-2016, The Astropy Developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1. &nbsp;
    Last built 11 May 2016. <br/>
  </p>
</footer>
  </body>
</html>